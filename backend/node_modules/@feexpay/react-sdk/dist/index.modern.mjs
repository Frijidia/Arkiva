import{jsx as e,jsxs as t,Fragment as a}from"react/jsx-runtime";import n from"react";import r,{createGlobalStyle as i}from"styled-components";import o from"axios";function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}let c;const d=i(c||(c=(e=>e)`
      .button {
        background-color:#112C56;
        color:white;
        text-align:center;
        padding:10px;
        border:none;
        width:100%;
        justify-content:center;
        align-items:center;
        flex-direction:row;
        border-radius:0.5rem;
        cursor:pointer;

      }
      .button_text{
         font-size:1rem;
         font-weight:800;
      }
      img{
        width:100px;
      }
      .choice_text {
        font-size:0.8rem;
      }
`));function s(e,t){try{switch(t.type){case"CHANGE/OPERATOR":case"CHANGE/EMAIL":case"CHANGE/FULLNAME":case"CHANGE/NAME_CARD":return l({},e,t.payload);case"CHANGE/COUNTRY_CODE":return l({},e,{country_code:t.payload.country_code});case"CHANGE/OPERATOR_NAME":return l({},e,{operator_name:t.payload.operator_name});case"CHANGE/NUMERO_CLIENT":let a="";return a=`${e.country_code}${t.payload.num_client}`,l({},e,{num_client_without_code:t.payload.num_client,num_client:a});case"CHANGE/CODE_OTP":return l({},e,{code_otp:t.payload.code_otp});case"CHANGE/NUMWITHOUTCODE":return l({},e,{num_client_without_code:t.payload.num_client_without_code});case"CHANGE/REQUESTMESSAGE":return l({},e,{paiement_request_verify_msg:t.payload.paiement_request_verify_msg,stopchargement:t.payload.stopchargement});case"CHANGE/REQUESTTOPAYINFO":return e;default:throw new Error("Message")}}catch(t){return console.error("Une erreur est survenue dans le reducer :",t),e}}let p={};const m=({children:t,amount:a,apiURL:r,token:i,id:o,reference:l,callback:c,description:d,callback_info:m,callback_url:_,fieldsToHide:h,buttonText:f,buttonStyles:g,defaultValueField:y})=>{var x,b,v,N,C,k;let S=localStorage.getItem("userInfo__");S=JSON.parse(S),console.log("userInfoLocal == ",S),p={price:a,apiURL:r,token:i,id:o,operator_name:"",custom_id:l||"",code_otp:"",callback_info:m,description:d,country_code:"",num_client:"",num_client_without_code:"",paiement_request_verify_msg:"En attente de paiement.",stopchargement:!1,requesttopayinfo:{},name_marchand:"",reference_marchand:"",email:(null==(x=S)?void 0:x.email)||"",full_name:(null==(b=S)?void 0:b.name)||"",callback:c,callback_url:_,numero_card:(null==(v=S)?void 0:v.phone)||"",name_card:(null==(N=S)?void 0:N.name)||"",email_card:(null==(C=S)?void 0:C.email)||"",title_card:"",address_card:"",locality_card:"",last_name_card:(null==(k=S)?void 0:k.lastName)||"",fieldsToHide:h,buttonText:f,buttonStyles:g,defaultValueField:y};const[E,w]=n.useReducer(s,p),A=n.useMemo(()=>({state:E,dispatch:w}),[E,w]);return e(u.Provider,{value:A,children:t})},u=n.createContext({state:p,dispatch:()=>{}}),_=()=>n.useContext(u),h=({open_modal:n,feexVisisbleBtn:r,buttonText:i,buttonStyles:o,buttonClass:c})=>(_(),t(a,{children:[e(d,{}),e("button",{onClick:()=>n(),className:`${c||"button"}`,style:l({display:r?"flex":"none"},o),children:e("span",{className:"button_text",style:{marginRight:"5px"},children:i})})]}));let f;const g=i(f||(f=(e=>e)`
.ModeTestMsg {
    padding: 6px;
    background: #112b56;
    text-align: center;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.ModeTestMsg p {
    font-size: 14px;
    text-align: center;
    color: white
}
.feexpay_close_btn{
    background-color: crimson;
    border-radius: 5rem;
    transform: translateX(100%) translateY(-100%);
    cursor: pointer;
    height:30px;
    width: 30px;
    background-image: url("https://api.feexpay.me/api/static/cross-23.png");
    background-size: cover;
    background-position: center;
    float: right;
   
  
  }

  .width-100 {
    width: 100% !important;
}
    .modal_container{
        position:fixed;
        display:flex;
        justify-content:center;
        align-items:center;
        background-color:rgba(0, 0, 0, 0.7);
        height:100vh;
        width:100vw;  
        z-index:100000000 !important;
        margin:0px;
        padding:0px;
        flex-direction:column;
        top:0px;
        left:0px;
        
    }

    .modal{
       display:grid;
       flex-direction:column;
       width:40%;
       height:92%;
       background-color: #f8f9fa !important;
       color:black;

      
    }

    .modal .modal_header{
        display:flex;
        flex-direction:row;
        width:100%;
        margin-bottom:2rem;
        box-shadow: 2px 3px 9px -4px rgba(0, 0, 0, 0.397);
        border-bottom-left-radius:1rem;
        border-bottom-right-radius:1rem;
        height: fit-content;
    }

    .modal .header_text{
        font-size:0.7rem;
        color:black;
        width:60%;
        text-align:right;
        padding-right: 1rem;
        padding-top: 0.5rem;
        height:fit-content;

        
        
        
    }
    .modal .logo_container{
        width:40%;
        padding-top: 0.5rem;
        padding-left:1rem;
        height:fit-content;
    }
    .modal .logo_container .logo {
        width:100px;

    }
    .pay_with{
        font-size:1rem;
        font-weight:800;
        color:darkblue;
    }

    .footer_modal_container{
        width:100%;
        height:6%;
        background-color:white;
        align-self:flex-end;
        display:flex;
        align-items:flex-end;
        justify-self:flex-end;
      
    }

    .footer_modal{
        width: 100%;
        height: 30px;
        background-color: #112C56;
        background-image: url("https://api.feexpay.me/api/static/motif_footer.svg");
        background-size: cover;
        background-position: center;
        

    }

    .secure_by_feexpay{
        display:flex;
        flex-direction:row;
        align-items:center;
        justify-content:center;
      }
      .img_lock{
        width:15px;
        margin-right:0.2rem;

      }
    
      .lock_line{
        background-color:#112C56;
        width:6px;
        height:1px;
      }
      .lock_text{
        font-size:0.7rem;
      }

      @media (min-width: 320px) {
        body {
            color: #626262;
        }
    }


    
    
    @media (min-width: 992px) {
        
    }

    @media (min-width: 1200px) {
        
    }

    @media (min-width: 650px) and (max-width: 850px) {
        
        .modal{
            width:75%;
            height:100%;
         }

         .feexpaycardBankForm .titulaire_input {
            width: auto !important;
        }
    }

    @media (max-width: 768px) {
        
    }

    @media (min-width: 950px) and (max-width:1025px) {
        .modal{
            width:65%;
            height:100%;
        }
    }

    @media (min-width: 651px) and (max-width:900px) {
        .modal{
            width:80%;
            height:100%;
        }
        .footer_modal_container{
            width:100%;
        }
    }

    @media (max-width:700px) {
        .modal_container{
            /*height:100vh;*/
            /*width:200vw;*/ 
        }

        .modal{
            width:100%;
            height:100%;
        }

        .choice_operator_img{
            flex-direction:column;
        }
        
    }

    
`));let y;const x=r.div(y||(y=(e=>e)`
     transition:all 1s;
     border:solid 1.5px gray;
     display:flex;
     flex-direction:row;
     align-items:center;
     width:100%;
     margin-top:1rem;
     transform-origin: center;
     cursor:pointer;
     
     :hover{
       transition:all 1s;
       border:solid 1.5px orangered;
     }

     
     .image_choice{
        display:flex;
        flex-direction:row;
        justify-content:end;
        align-items:center;
        position:relatif;
        right:1rem;
        justify-self:flex-end;
        padding-top:8px;
        padding-bottom:8px;
        width:50%;
       
     }
     .image_choice img{
      width:40px;
     }
     .input_choice,.choice_text{
        margin-left:0.5rem;
     }
     .img_moov{
        margin-right:2rem;
     }
     .img_mtn{
       margin-right:1rem
     }
     .text_container{
        width:70%;
        display:flex;
        align-items:center;
        flex-direction:row;

     }

 
   

`)),b=({choice_local_func:a})=>e(x,{children:t("div",{className:"text_container",onClick:()=>a(),style:{height:"45px"},children:[e("input",{onClick:()=>a(),className:"input_choice",type:"radio",name:"isClicked",id:""}),e("div",{onClick:()=>a(),className:"choice_text",children:"Mobile Money"})]})}),v="https://api.feexpay.me/api/static/Flag_of_Togo.svg.png",N="https://api.feexpay.me/api/static/Flag_of_Benin.svg.png",C="https://api.feexpay.me/api/static/Flag_of_Rwanda.svg.png",k="https://api.feexpay.me/api/static/CI.png",S="https://api.feexpay.me/api",E=({choice_cardBank_func:a})=>t(x,{children:[t("div",{className:"text_container",onClick:()=>a(),children:[e("input",{onClick:()=>a(),className:"input_choice",type:"radio",name:"isClicked",id:""}),e("div",{onClick:()=>a(),className:"choice_text",children:"Cartes bancaires"})]}),t("div",{className:"image_choice",onClick:()=>a(),children:[e("img",{className:"img_mtn",src:"https://api.feexpay.me/api/static/logo_visa.svg",alt:""}),e("img",{className:"img_moov",src:"https://api.feexpay.me/api/static/logo_mastercard.svg",alt:""})]})]});let w;const A=i(w||(w=(e=>e)`
//Modal notify
.ModalInfos {
   width: 100vw;
   height: 100vh;
   position: fixed;
   top: 0;
   left: 0;
   background-color: #00000075;
   display: flex;
   align-items: center;
   justify-content: center;
 }
 
 .ModalInfos__center {
   width: 400px;
   background-color: #112C56;
   display: flex;
   align-items: center;
   flex-direction: column;
   padding: 20px 30px;
   border-radius: 5px;
 }

 .ModalInfos__btn {
   padding: 6px 15px;
   font-size: 14px;
   background: #d56209;
   color: white;
   border-radius: 4px;
   margin-top: 15px;
 }

 .ModalInfos__text {
   font-size: 14px;
   color: white;
   text-align: center;
   line-height: 25px;
 }

 
    .choice_operator_card{
        width:100%;
        border-bottom:solid 1.9px black;
        display:flex;
        flex-direction:row;
        align-items:center;
        justify-content:center;
    }

    .choice_operator_text{
         width:auto;
         font-weight:500;
         font-size: 16px;
         margin-bottom: 15px;
    }
    .choice_operator_img{
        display:flex;
        width:40%;
        justify-content:flex-end;
        align-items:center;
        flex-direction:row;

    }
    .choice_operator_img input{
        margin-right:0.3rem;
    }
    .choice_operator_img img{
        width:45px;
        padding-top:8px;
        padding-bottom:8px;
        
    }


    .choice_mtn{
        display:flex;
        align-items:center;
        justify-content:center;
        flex-direction:row;
  
  
     }
     .choice_moov{
        display:flex;
        align-items:center;
        justify-content:center;
        flex-direction:row;
     }
    


    .img_mtn{
        margin-right:1rem;
    }

.error_text_operator{
    font-size:0.6rem;
    color:crimson;
    margin-top:0.5rem;
}
    @media screen and (max-width:960px){
      
        .img_mtn{
            margin-right:0px;
        }
        .choice_operator_img{
           display:flex; 
           align-items:center;
           justify-content:flex-end;  
           /*flex-direction:column;*/
        }
        .choice_mtn{
           display:flex;
     
        }
        .choice_moov{
            display:flex;
        }
        .img_mtn{
           margin-right:0px;
        }
     
     
     }
`));let F;const T=i(F||(F=(e=>e)` 
    .margin{
        margin-top:1rem;
        margin-bottom:1rem;
    }

    .feexpay_input_simple{
        border: 1px solid #ced4da;
        border-radius: 5px;
        outline:none;
        /*border-bottom: solid 1.5px #00000071;*/
        padding-bottom:10px;
        padding-top:10px;
        padding-left:10px;
        width: -webkit-fill-available;
        margin-bottom: 1.5rem;
        margin-top: 5px;
        background-color: transparent;
    }
    
    
    .num_operator_card{
        width:100%;
        display:flex;
        flex-direction:column;

    }
    .num_input_container{
        width:100%;
        display:flex;
        flex-direction:row;
        align-items:center;
        border: 1px solid #ced4da;
        border-radius: 5px;
        /*border-bottom:solid 2px black;*/
    }
    .flag{
        width:10%;
        text-align: center !important;
    }
    .input_num{
        border:none !important;
        outline:none !important;
        background-color: transparent;
        padding:10px !important;
        width: -webkit-fill-available;
    }
    .flag .img_flag{
        width:25px !important;
        text-align: center;
    }

    .num_flag_container{
        width:30%;
        padding:0px;
        background-color:white;
        box-shadow:1px 1px 20px 0.2px lightgrey;
        display:flex;
        flex-direction:column;
        transform:translateY(40%);
        position:absolute;
        
    }
    .flag_info_container{
        transition:all 1s;
        display:flex;
        justify-content:center;
        align-items:center;
        padding:3px;
        padding-left:0px;
        cursor:pointer;

    }
    .flag_info_container:hover{
        transition:all 1s;
        background-color:whitesmoke;

    }

    .flag_container img{
        width:25px;
    }
    .flag_conyainer{
        width:10%;
        padding-top:5px;
    }
    .flag_name{
        width:90%;
        text-align:right;
        padding-right:1rem;
        font-size:0.8rem;
    }
    .error_text_operator_input{
        font-size:0.6rem;
        color:crimson;
        margin-top:0.5rem;
    }
    
    .custom-select {
      display: inline-block;
      width: 100%;
      height: calc(1.5em + 0.75rem + 2px);
      padding: 0.375rem 1.75rem 0.375rem 0.75rem;
      font-size: 1rem;
      font-weight: 400;
      line-height: 1.5;
      color: #495057;
      vertical-align: middle;
      background: #fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") right 0.75rem center/8px 10px no-repeat;
      border: 1px solid #ced4da;
      border-radius: 0.25rem;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
    }
    
    .custom-select:focus {
      border-color: #80bdff;
      outline: 0;
      box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
    }
    
    .custom-select:focus::-ms-value {
      color: #495057;
      background-color: #fff;
    }
    
    .custom-select[multiple], .custom-select[size]:not([size="1"]) {
      height: auto;
      padding-right: 0.75rem;
      background-image: none;
    }
    
    .custom-select:disabled {
      color: #6c757d;
      background-color: #e9ecef;
    }
    
    .custom-select::-ms-expand {
      display: none;
    }
    
    .custom-select:-moz-focusring {
      color: transparent;
      text-shadow: 0 0 0 #495057;
    }
    
    .custom-select-sm {
      height: calc(1.5em + 0.5rem + 2px);
      padding-top: 0.25rem;
      padding-bottom: 0.25rem;
      padding-left: 0.5rem;
      font-size: 0.875rem;
    }
    
    .custom-select-lg {
      height: calc(1.5em + 1rem + 2px);
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
      padding-left: 1rem;
      font-size: 1.25rem;
    }
    
    @media screen and (max-width:700px) {
         .num_flag_container{
             width:85%;
        }

    }
`)),M=({send_pay_form:r,setnum_exist_false:i,setnum_exist_true:o})=>{var l,c,d,s,p;const{state:m,dispatch:u}=_(),[h,f]=n.useState(!1),[g,y]=n.useState(1);n.useState(null);const[x,b]=n.useState(!1),[S,E]=n.useState("");n.useState("");const[w,A]=n.useState(""),[F,M]=n.useState(""),[O,G]=n.useState(""),[I,R]=n.useState("");n.useState("");const[B,U]=n.useState(""),[V,z]=n.useState("");n.useState(""),n.useState("229");const[P,L]=n.useState(""),[D,H]=n.useState(!1),[$,j]=n.useState(""),[q,Q]=n.useState("");let X=[{code:"229",name:"Bénin",country_code:"BJ"},{code:"226",name:"Burkina-Faso",country_code:"BF"},{code:"225",name:"Côte d'Ivoire",country_code:"CI"},{code:"242",name:"Congo Brazzaville",country_code:"CG"},{code:"221",name:"Sénégal",country_code:"SN"},{code:"228",name:"Togo",country_code:"TG"}];const Y={229:[{value:"MOOV",label:"MOOV"},{value:"MTN",label:"MTN"},{value:"CELTIIS BJ",label:"CELTIIS"}],226:[{value:"MOOV BF",label:"MOOV"},{value:"ORANGE BF",label:"ORANGE"}],225:[{value:"MOOV CI",label:"MOOV"},{value:"MTN CI",label:"MTN"},{value:"WAVE CI",label:"WAVE"},{value:"ORANGE CI",label:"ORANGE"}],228:[{value:"MOOV TG",label:"MOOV"},{value:"TOGOCOM TG",label:"TOGOCOM"}],221:[{value:"ORANGE SN",label:"ORANGE"},{value:"FREE SN",label:"FREE"}],242:[{value:"MTN CG",label:"MTN CG"}]},J=e=>(m.fieldsToHide||[]).includes(e);return n.useEffect(()=>{if(m.defaultValueField&&m.defaultValueField.country_iban){let t,a=m.defaultValueField.country_iban,n=m.defaultValueField.name,r=m.defaultValueField.email,i=m.defaultValueField.network?m.defaultValueField.network.toUpperCase():m.defaultValueField.network;if(t="BJ"===a?229:"BF"===a?226:"CI"===a?225:"SN"===a?221:"CG"===a?242:"TG"===a?228:229,u({type:"CHANGE/COUNTRY_CODE",payload:{country_code:t}}),j(t),H("ORANGE SN"===i||"ORANGE"===i),Y[t]){var e;const a=null==(e=Y[t].find(e=>e.label===m.defaultValueField.network))?void 0:e.value;Q(a||i),u({type:"CHANGE/OPERATOR_NAME",payload:{operator_name:a}})}else Q(i);u({type:"CHANGE/FULLNAME",payload:{full_name:n}}),R(n),u({type:"CHANGE/EMAIL",payload:{email:r}}),G(r)}console.log(m)},[m.defaultValueField]),n.useEffect(()=>{L(0===q.length?"Sélectionnez le réseau":""),J("email")&&G("johndoe@gmail.com"),J("full_name")&&R("John"),0===O.length?U("Entrez votre email"):(U(""),u({type:"CHANGE/EMAIL",payload:{email:O}})),0===I.length?z("Entrez votre nom et prenom"):(z(""),u({type:"CHANGE/FULLNAME",payload:{full_name:I}})),Number.isNaN(parseInt(w))?(b(!0),E("Entrez votre numéro"),i()):(b(!1),E(""),o())},[r]),t(a,{children:[e(T,{}),t("div",{children:[e("label",{htmlFor:"countrySelect",style:{marginBottom:"1rem"},children:"Sélectionnez un pays :"}),null!=(l=m.defaultValueField)&&l.country_iban?e("div",{className:"",style:{marginTop:"1rem",width:"-webkit-fill-available",height:"auto",display:"flex",alignItems:"center",border:"1px solid #ccc",padding:"0.5rem",borderRadius:"4px"},children:e("span",{style:{marginLeft:"0.5rem"},children:null==(c=X.find(e=>e.country_code===m.defaultValueField.country_iban))?void 0:c.name})}):t("select",{className:"custom-select",id:"countrySelect",value:$,style:{marginTop:"1rem"},onChange:e=>{j(e.target.value),Q(""),u({type:"CHANGE/COUNTRY_CODE",payload:{country_code:e.target.value}})},children:[e("option",{value:"",children:"Choisissez un pays"}),X.map(t=>e("option",{value:t.code,children:t.name},t.code))]})]}),$&&Y[$]&&t("div",{className:"margin",children:[e("label",{htmlFor:"networkSelect",style:{marginTop:"1rem",marginBottom:"1.2rem"},children:"Choisissez un réseau :"}),null!=(d=m.defaultValueField)&&d.network?e("div",{className:"",style:{marginTop:"1rem",width:"-webkit-fill-available",height:"auto",display:"flex",alignItems:"center",border:"1px solid #ccc",padding:"0.5rem",borderRadius:"4px"},children:e("span",{style:{marginLeft:"0.5rem"},children:m.defaultValueField.network})}):t("div",{children:[t("select",{className:"custom-select",id:"networkSelect",value:q,style:{marginTop:"1rem"},onChange:e=>{Q(e.target.value),u({type:"CHANGE/OPERATOR_NAME",payload:{operator_name:e.target.value}}),H("ORANGE SN"===e.target.value)},children:[e("option",{value:"",children:"Sélectionnez le réseau mobile"}),Y[$].map(t=>e("option",{value:t.value,children:t.label},t.value))]}),e("div",{className:"feepay_fullname_error error_text_operator_input",style:{display:"block",marginBottom:"1.5rem"},children:P})]})]}),t("div",{children:[!J("full_name")&&e("div",{className:"margin",style:{display:"block",marginBottom:"1.5rem"},children:t("div",{children:[e("label",{children:"Nom et prénoms"}),null!=(s=m.defaultValueField)&&s.name?e("div",{className:"",style:{marginTop:"1rem",width:"-webkit-fill-available",height:"auto",display:"flex",alignItems:"center",border:"1px solid #ccc",padding:"0.5rem",borderRadius:"4px"},children:e("span",{style:{marginLeft:"0.5rem"},children:m.defaultValueField.name})}):t("div",{children:[e("input",{autoComplete:"off",className:"feexpay_fullname_input feexpay_input_simple feexpay_input_fullname input_simple",type:"text",style:{marginBottom:"0px",marginTop:"0.25rem"},onChange:e=>{R(e.target.value),function(e){0!==e.target.value.length&&u({type:"CHANGE/FULLNAME",payload:{full_name:e.target.value}})}(e)},placeholder:"John Don"}),e("div",{className:"feepay_fullname_error error_text_operator_input",children:V})]})]})}),!J("email")&&e("div",{style:{display:"block",marginBottom:"1.5rem"},children:t("div",{children:[e("label",{children:"Adresse mail"}),null!=(p=m.defaultValueField)&&p.email?e("div",{className:"custom-select",style:{marginTop:"1rem",width:"-webkit-fill-available",height:"auto",display:"flex",alignItems:"center",border:"1px solid #ccc",padding:"0.5rem",borderRadius:"4px"},children:e("span",{style:{marginLeft:"0.5rem"},children:m.defaultValueField.email})}):t("div",{children:[e("input",{autoComplete:"off",className:"feexpay_email_input feexpay_input_simple feexpay_input_email input_simple",type:"email",style:{marginBottom:"0px",marginTop:"0.25rem"},placeholder:"example@gmail.com",onChange:e=>{G(e.target.value),function(e){0!==e.target.value.length&&u({type:"CHANGE/EMAIL",payload:{email:e.target.value}})}(e)}}),e("div",{className:"feepay_email_error error_text_operator_input",children:B})]})]})}),e("label",{htmlFor:"input_num",children:"Numéro de téléphone(sans indicatif)"}),t("div",{className:"num_operator_card",children:[e("div",{className:"num_input_container",children:e("input",{autoComplete:"off",className:"input_num",style:{marginTop:"0.25rem"},type:"tel",name:"input_num",onChange:e=>{A(e.target.value),function(e){Number.isNaN(parseInt(e.target.value))||u({type:"CHANGE/NUMERO_CLIENT",payload:{num_client:e.target.value}})}(e)},placeholder:function(){switch(g){case 1:return{flagLink:N,placeholder:"0195020304"};case 2:return{flagLink:v,placeholder:"05340312"};case 3:return{flagLink:k,placeholder:"01204502"};case 4:return{flagLink:C,placeholder:"04022304"};default:return null}}().placeholder})}),t("div",{className:"num_flag_container",style:{display:h?"flex":"none"},children:[t("div",{onClick:()=>{y(1),f(!1)},className:"flag_info_container",children:[e("div",{className:"flag_container",children:e("img",{src:N,alt:""})}),e("div",{className:"flag_name",children:"Bénin"})]}),t("div",{onClick:()=>{y(2),f(!1)},className:"flag_info_container",children:[e("div",{className:"flag_container",children:e("img",{src:v,alt:""})}),e("div",{className:"flag_name",children:"Togo"})]}),t("div",{onClick:()=>{y(3),f(!1)},className:"flag_info_container",children:[e("div",{className:"flag_container",children:e("img",{src:k,alt:""})}),e("div",{className:"flag_name",children:"Côte d'Ivoire"})]}),t("div",{onClick:()=>{y(4),f(!1)},className:"flag_info_container",children:[e("div",{className:"flag_container",children:e("img",{src:C,alt:""})}),e("div",{className:"flag_name",children:"Rwanda"})]})]})]}),e("div",{className:"error_text_operator_input",style:{display:x?"block":"none"},children:S}),D&&t("div",{className:"num_operator_card",children:[e("label",{style:{marginTop:"1.2rem",marginBottom:"1rem"},htmlFor:"input_num",children:"Code OTP* (Obtenez ce code en tapant *144*391#) :"}),e("div",{className:"num_input_container",children:e("input",{type:"number",id:"otp_input",name:"input_num",className:"input_num",onChange:e=>{M(e.target.value),function(e){Number.isNaN(parseInt(e.target.value))||u({type:"CHANGE/CODE_OTP",payload:{code_otp:e.target.value}})}(e)}})})]})]})]})};let O;const G=i(O||(O=(e=>e)`
      .button_container{
        width:100%;
        display:flex;
        justify-content:center;
        align-items:center;
        flex-direction:column;
      }
      .button_pay{
          background-color:#112C56;
          color:white;
          text-align:center;
          padding:10px;
          border:none;
          display:flex;
          justify-content:center;
          align-items:center;
          flex-direction:row;
          cursor:pointer;
          border-radius:10px;
          margin-top: 0.5rem;
          width: fit-content;
      }
      .button_text{
        font-size:0.8rem;
        font-weight:500;
      }

      .button_back{
        background-color: #f8f9fa !important;
        color: #112C56 !important;
        margin-right: 2px !important;
        border: 1px solid #112C56 !important;
    }

      @media screen and (max-width:960px) {
        .button_pay{
          width:100%;
         }
    }
`)),I=({pay_func:n})=>{const{state:r}=_();return t(a,{children:[e(G,{}),e("div",{className:"button_container",children:e("button",{onClick:()=>n(),className:"button_pay",children:t("span",{className:"button_text",children:["Payer ",r.price," XOF"]})})})]})};let R;const B=r.div(R||(R=(e=>e)`
     transition:all 1s;
     border:solid 1.5px gray;
     display:flex;
     flex-direction:row;
     align-items:center;
     width:100%;
     margin-top:1rem;
     transform-origin: center;
     height:56px;

     :hover{
        transition:all 1s;
        border:solid 1.5px orangered;
     }
     .input_choice,.choice_text{
        margin-left:0.5rem;
     }
     

`)),U=({onClickCancel:a})=>t(B,{children:[e("input",{onClick:()=>a(),className:"input_choice",type:"radio",name:"isClicked",id:""}),e("div",{onClick:()=>a(),className:"choice_text",children:"Annuler le paiement"})]}),V=({pay_func:n})=>{const{state:r}=_();return t(a,{children:[e(G,{}),e("div",{className:"button_container",children:e("button",{onClick:()=>n(),className:"button_pay",children:t("span",{className:"button_text",children:["Payer ",r.price," XOF"]})})})]})};let z;const P=i(z||(z=(e=>e)`
 
// card step 2
.CardStep2__field,
.CardStep2 {
    display: flex;
    flex-direction: column;
}
.CardStep2 {
    width: 100%;
    gap: 13px;
}

.CardStep2__field {
    gap: 8px;
}

.CardStep2__label {
    font-size: 14px;
}

.CardStep2_divField {
    display: flex;
    gap: 20px;
    width: 100%;
}

.CardStep2_divField label {
    width: 50%;
}

.CardStep2__input {
    width: 100%;
    border-radius: 7px;
    border: 1px solid rgb(187, 187, 187);
    background-color: rgb(238, 238, 238);
    font-size: 14px;
    outline: none;
    padding: 10px 0;
    text-indent: 10px;
    color: black;
}

.Pay_btn_flw {
   padding: 14px 80px;
   background: #112b56e5;
   color: white;
   font-size: 17px;
   outline: none;
   border: none;
   border-radius: 5px;
   cursor: pointer
}

.CardStep2__cvn {
    width: 48%;
}

.CardStep2__btns{
    width: 100%;
    display: flex;
    justify-content: end;
    gap: 6px
}

.CardStep2__btnNext {
   color: white;
   background: #112b56e5;
}

.CardStep2__btnPrev {
   outline: none;
   border: 1px solid #112b56e5;
   border-radius: 5px;
   background: none;
   padding: 14px 16px
   color: #112b56e5;
   cursor: pointer
}  

.CardStep2__error {
   font-size: 13px;
   color: red;
}

.feexpaycardBankForm .form_pay{
   width:100%;
 
}


.feexpaycardBankForm .titulaire_info_container{
     display:flex;
     flex-direction:column;
     margin-top:0.3rem;

}

.feexpaycardBankForm .titulaire_input{
   display:flex;
   flex-direction:row;
   width:100%;
   /*background-color:#cfcfcf;*/
   border-radius:0px;
   justify-content: inherit;
}
.feexpaycardBankForm .titulaire_lab{
   margin-bottom:5px;
   margin-top:0px;
   font-size: 0.8rem;
}

.feexPayMobilePay .choice_operator_card{
   width:100%;
   border-bottom:solid 1.5px #00000071;
   display:flex;
   flex-direction:row;
   align-items:center;
   justify-content:center;
}

.color_card_type {
    border: 1px solid #112C56 !important;
    border-radius: 2px !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
}

.feexPayMobilePay .choice_operator_text{
    width:60%;
    display:flex;
    align-items:center;
    font-weight:700;
    font-size:0.8rem;
}

.feexPayMobilePay .choice_operator_img{
   display:flex;
   width:40%;
   justify-content:flex-end;
   align-items:center;
   flex-direction:row;

}
.feexPayMobilePay .choice_operator_img input{
   margin-right:0.3rem;
}
.feexPayMobilePay .choice_operator_img img{
   width:45px;
   padding-top:8px;
   padding-bottom:8px;
   
}



.feexpaycardBankForm .input_container{
    width:90%;
}
.feexpaycardBankForm .input_info{
   background-color:#fffcfc;
    border:none;
    outline:none;
    padding:10px;
    width:100%;
    border: 1px solid #5a5a5a69;
    border-radius: 2px;

}
.feexpaycardBankForm .input_info::placeholder{
   font-size: 0.7rem;
}

.feexpaycardBankForm .input_customer{
   width: 85%;
}
.feexpaycardBankForm .input_customer_prenom{
   float: right;
}
.feexpaycardBankForm .input_info:focus{
  background-color:whitesmoke;
}
.feexpaycardBankForm .img_container{
   display:flex;
 
}
.feexpaycardBankForm .img_user{
     width:25px;
     margin-right:1rem;
}


.feexpaycardBankForm .other_info_container{
   display:flex;
   justify-content:center;
   align-items:center;
   flex-direction:row;
   width:100%;
   margin-top:0.3rem;
 
}

.feexpaycardBankForm .expiration_date,.cryptogramme{
     width:50%;
     display:flex;
     flex-direction:column;

}

.feexpaycardBankForm .cryptogramme{
 display:flex;
 justify-content:flex-end;
 
 
}
.feexpaycardBankForm .cryptogramme_custom{
   width:70% !important;
   align-items:flex-end !important;
 }
.feexpaycardBankForm .expiration_date_custom{
   width:30% !important;
}
.cryptogramme .titulaire_lab_prenom{
   padding-left:12%;
}

.feexpaycardBankForm .date_expiration_input,.feexpaycardBankForm .cryptogramme_input{
     width:83%;
     padding:15px;
     background-color:#cfcfcf;
     border:none;
     outline:none;
     border-radius:0.5rem;
}
.feexpaycardBankForm .cryptogramme_custom .input_w{
     width:87% !important;
 }


.feexpaycardBankForm .cryptogramme_input:focus{
 background-color:whitesmoke;
}
.feexpaycardBankForm .date_expiration_input:focus{
 background-color:whitesmoke;
}
.feexpay_modal_container .padding_add{
    padding-left: 2rem;
    padding-right: 2rem;
    height: 95%;
    overflow-y: scroll !important;
    
}
.feexpay_container_form{
   height: 100%;
   display: grid;
   flex-direction: column;
   justify-content: flex-end;
   align-items: center;
}

@media screen and (max-width:924px) {
     .feexpaycardBankForm .expiration_date,.feexpaycardBankForm .cryptogramme{
         width:100%;
         padding:0px;

      }
      .feexpaycardBankForm .titulaire_lab{
         
           margin-top:10px;
       
      }
   
      .cryptogramme .titulaire_lab_prenom{
         padding: 0%;
      }
      .feexpaycardBankForm .input_customer{
       width: auto;
     }
      .feexpaycardBankForm .cryptogramme_custom .input_w{
       width:100% !important;
   }
 
      .feexpaycardBankForm .other_info_container{
         flex-direction:column;

         
      }
      .feexpaycardBankForm .expiration_date_custom{
       width: 100% !important;
   }
      .feexpaycardBankForm .date_expiration_input,.feexpaycardBankForm .cryptogramme_input{
         width:91%;
      }

      .feexpaycardBankForm .cryptogramme_custom{
           width:100% !important;
           align-items: flex-start !important;
           
       }
       .feexpay_modal_container .padding_add{
         overflow-y: scroll !important;
           height:fit-content;
           
      }
   


 }

   
    
`));let L,D=e=>e;const H=({step:i,mode:o,redirectUrlCard:l,setreseau_card:c})=>{const{state:d,dispatch:s}=_(),[p,m]=n.useState("");n.useState("");const[u,h]=n.useState(""),[f,g]=n.useState(""),[y,x]=n.useState(""),[b,v]=n.useState(""),[N,C]=n.useState(""),[k,S]=n.useState(""),[E,w]=n.useState(""),A=r.div(L||(L=D`
    .FormTest {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 15px;
      width: 100%;
      margin-top: 15px;
    }

  .FormTest__input {
      width: 100% !important;
      height: 36px !important;
      border-radius: 5px !important;
      font-size: 14px !important;
      border: 1px solid rgb(187, 187, 187) !important;
      outline: none !important;
      text-indent: 5px;
      margin: 0 !important;
  }

  .FormTest__btn {
      padding: 7px 15px;
      border-radius: 5px;
      background: #112C56;
      color: white;
      font-size: 14px;
      outline: none;
  }

  `));return n.useEffect(()=>{0===E.trim().length?C("L'email est requis"):(C(""),s({type:"CHANGE/NAME_CARD",payload:{email_card:E}})),0===f.trim().length||Number.isNaN(parseInt(f))?S("Le numéro de téléphone est requis"):(S(""),s({type:"CHANGE/NAME_CARD",payload:{numero_card:f}})),0===p.trim().length?x("Le nom et le prénom sont requis"):(x(""),s({type:"CHANGE/NAME_CARD",payload:{name_card:p}})),0===u.trim().length?v("Le prénom sont requis"):(v(""),s({type:"CHANGE/NAME_CARD",payload:{last_name_card:u}}))},[E,p,u,f,i]),t(a,{children:[e(P,{}),e("div",{className:"feexpaycardBankForm",children:e("form",{className:"form_pay",children:"SANDBOX"===o?e(A,{children:t("form",{method:"POST",action:"https://checkout.flutterwave.com/v3/hosted/pay",class:"FormTest",children:[t("select",{id:"card-type",name:"card-type",onchange:"window.feexpay_select_card()",class:"FormTest__input",children:[e("option",{value:"",disabled:!0,selected:!0,hidden:!0,children:"Sélectionnez un type de carte"}),e("option",{value:"EUR",children:"VISA"}),e("option",{value:"USD",children:"MASTERCARD"}),e("option",{value:"EUR,USD,XOF",children:"AMEX"}),e("option",{value:"EUR,USD,XOF",children:"GOOGLE PAY"}),e("option",{value:"NGN",children:"NIGERIA BANK"}),e("option",{value:"NGN",children:"NIGERIA BANK TRANSFER"})]}),e("input",{type:"hidden",name:"public_key",value:"FLWPUBK_TEST-937b5f106a970775ab5a9108618e5904-X"}),e("input",{type:"email",class:"CardStep2__input",placeholder:"votre email",name:"customer[email]",required:!0}),e("input",{type:"test",class:"CardStep2__input",placeholder:"votre nom et prénom",name:"customer[name]",required:!0}),e("input",{type:"hidden",name:"tx_ref",value:"txref-81123"}),e("input",{type:"number",class:"CardStep2__input",placeholder:"montant",name:"amount",required:!0}),e("input",{type:"hidden",name:"meta[source]",value:"docs-html-test"}),e("input",{type:"hidden",name:"redirect_url",placeholder:"Url de redirection",class:"CardStep2__input",value:l,required:!0}),e("br",{}),t("button",{type:"submit",class:"FormTest__btn",id:"start-payment-button",children:["Payer ",d.price," XOF"]})]})}):(()=>{if(0===i)return e(a,{children:t("div",{className:"CardStep2",children:[t("select",{id:"card-type",className:"CardStep2__input",name:"card-type",onChange:e=>c(e.target.value),children:[e("option",{value:"",disabled:!0,selected:!0,hidden:!0,children:"Sélectionnez un type de carte"}),e("option",{value:"VISA",children:"VISA"}),e("option",{value:"MASTERCARD",children:"MASTERCARD"})]}),t("div",{className:"CardStep2_divField",children:[t("label",{className:"CardStep2__field",children:[e("span",{className:"CardStep2__label",children:"Nom"}),e("input",{className:"CardStep2__input",type:"text",placeholder:"Doe",onChange:e=>{m(e.target.value),function(e){0===e.target.value.length&&s({type:"CHANGE/NAME_CARD",payload:{name_card:""}})}(e)}}),e("span",{className:"CardStep2__error",children:y})]}),t("label",{className:"CardStep2__field",children:[e("span",{className:"CardStep2__label",children:"Prénoms"}),e("input",{className:"CardStep2__input",type:"text",placeholder:"John",onChange:e=>{h(e.target.value),function(e){0===e.target.value.length&&s({type:"CHANGE/NAME_CARD",payload:{last_name_card:""}})}(e)}}),e("span",{className:"CardStep2__error",children:b})]})]}),t("label",{className:"CardStep2__field",children:[e("span",{className:"CardStep2__label",children:"Email"}),e("input",{className:"CardStep2__input",type:"email",placeholder:"Email",onChange:e=>{w(e.target.value),function(e){0===e.target.value.length&&s({type:"CHANGE/NAME_CARD",payload:{email_card:""}})}(e)}}),e("span",{className:"CardStep2__error",children:N})]}),t("label",{className:"CardStep2__field",children:[e("span",{className:"CardStep2__label",children:"Numéro de téléphone"}),e("input",{className:"CardStep2__input",type:"number",placeholder:"Numéro",onChange:e=>{g(e.target.value),function(e){0===e.target.value.length&&s({type:"CHANGE/NAME_CARD",payload:{numero_card:""}})}(e)}}),e("span",{className:"CardStep2__error",children:k})]})]})})})()})})]})},$=({systemCardPay:r,renderComponent:i,mode:l,redirectUrlCard:c})=>{const[d,s]=n.useState(""),[p,m]=n.useState(""),[u,h]=n.useState(!0),[f,g]=n.useState(!1),[y,x]=n.useState(""),[b,v]=n.useState(!1),N=["Agla","Aibatin","Ahogohoue","Gbedegbe","Missite","Houenoussou","Cadjehoun","Vodje","Fidjrosse","Fiyegnon","Cototier","Ahouanleko","Alobatin","Finagnon","Houeyiho","Saint Jean","Gbegamey","Gbediga","Yenawa","Missogbe","Kouhounou","Midedji","Vedoko","Gbenonkpo","Fifadji","Zogbo","Zogbohohoue","Minonkpo","Mededjro","Tonato","Gbedagba","Houehoun","Sedami","Sedjro","Todote","Yevedo","Dagbegji","Enagnon","Fignon","Sehogan","Ladji","Djidje","Vossa","Dantokpa","Jericho","GBedromede","Ahouansori","Tokpa","Missebo","Gbedokpo","Zongo","Joncquet","Wlacodji","Midombo","Fifatin","Adogleta","Hlakonme","Agbato","DOnatin","Senade","Irede"],C=N[Math.floor(Math.random()*N.length)];n.useRef(null),n.useRef(null);const[k,E]=n.useState(0),[w,F]=n.useState(!0),[T,M]=n.useState(!1),{state:O,dispatch:I}=_();function R(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length;for(let n=0;n<14;n++)e+=t.charAt(Math.floor(Math.random()*a));return e}return n.useEffect(()=>{},[O.numero_card,O.reseau_card,d,O.name_card,O.email_card,O.last_name_card,i]),t(a,{children:[e(A,{}),e("div",{className:"ModalInfos",style:{display:T?"flex":"none"},children:t("div",{className:"ModalInfos__center",children:[t("p",{className:"ModalInfos__text",style:{paddingBottom:"15px",borderBottom:"1px solid white"},children:["Pour sélectionner d’autres moyens de paiement ",e("strong",{children:"(cartes et autres)"}),", cliquez sur ",e("strong",{children:"Changer la méthode de paiement"}),"."]}),t("p",{className:"ModalInfos__text",children:["To select other payment methods ",e("strong",{children:"(cards and others)"}),", click on ",e("strong",{children:"Change payment method"}),"."]}),e("button",{className:"ModalInfos__btn",onClick:()=>M(!1),children:"Ok"})]})}),u&&t("div",{children:[e("div",{className:"choice_operator_card",children:e("div",{className:"choice_operator_text",children:"Paiement par cartes bancaires"})}),e("div",{className:"feexpay_title_error error_text_operator_input",style:{fontSize:"0.6rem",color:"crimson",marginTop:"0.1rem",marginBottom:"18px"},children:p}),e(H,{step:k,reference:R(),mode:l,redirectUrlCard:c,setreseau_card:s}),"SANDBOX"!==l&&w?b?t(a,{children:[e(G,{}),e("div",{className:"button_container",style:{paddingTop:"2rem"},children:t("div",{className:"button_pay",style:{diplay:"flex",alignItems:"center",justifyContent:"center",width:"fit-content"},children:[e("span",{className:"button_text",children:"En cours"}),e("img",{src:"https://api.feexpay.me/api/static/spinner.svg",width:30,height:30,alt:""})]})})]}):e(V,{pay_func:()=>function(){if(console.log(d),console.log(O.reseau_card),""===d)m("Choisissez votre operateur"),I({type:"CHANGE/NAME_CARD",payload:{reseau_card:""}});else{if(b)return;v(!0),m(""),I({type:"CHANGE/NAME_CARD",payload:{reseau_card:d}}),async function(){if(R(),""!==d)if(m(""),""!==O.numero_card&&""!==O.name_card&&""!==O.email_card&&""!==O.last_name_card)try{localStorage.setItem("userInfo__",JSON.stringify({name:(null==O?void 0:O.name_card)||"",lastName:(null==O?void 0:O.last_name_card)||"",email:(null==O?void 0:O.email_card)||"",phone:(null==O?void 0:O.numero_card)||"",network:d||"",country:(null==O?void 0:O.country)||"",address1:C})),await o.post(`${S}/transactions/card/inittransact/integration`,{amount:`${O.price}`,reseau:`${d}`,token:`${O.token}`,shop:`${O.id}`,first_name:`${O.name_card}`,last_name:`${O.last_name_card}`,address1:`${C}`,district:"Cotonou",country:"Benin",phone:`${O.numero_card}`,email:`${O.email_card}`,callback_info:`${O.callback_info}`,description:`${O.description}`,systemCardPay:r,redirectUrlCard:c}).then(e=>{I({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"En attente de paiement",stopchargement:!0}});const t=e.data.reference;if(x(e.data.url),h(!1),g(!0),500===e.status)return void I({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Une erreur s'est produite. Veuillez recharger la page puis réessayer",stopchargement:!0}});frames&&M(!0);let a=0;try{const e=setInterval(async()=>{let n=await o.get(`${S}/transactions/getrequesttopay/integration/${t}`),r=n.data.status;console.log(n),"SUCCESSFUL"===r||"FAILED"===r?(a+=1,console.log(r),clearInterval(e),I({type:"CHANGE/REQUESTTOPAYINFO",payload:{transref:t,status:n.data.status}}),I({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Paiement effectué",stopchargement:!0}}),setTimeout(()=>{if(O.callback&&"function"==typeof O.callback)O.callback({reference:t,status:"SUCCESSFUL",phoneNumber:O.num_client,full_name:O.full_name,reseau:O.operator_name,callback_info:O.callback_info,description:O.description});else if(void 0!==O.callback_url){const e=new URL(O.callback_url);O.callback_url=e.searchParams&&e.searchParams.toString()?`${O.callback_url}&id_transaction=${t}`:`${O.callback_url}?id_transaction=${t}`,window.location.href=O.callback_url}},3e3)):(a++,30===a&&(clearInterval(e),clearInterval(e)))},3e4)}catch(e){console.log("Erreur survenue :\n",e)}})}catch(e){v(!1),alert("Une erreur s'est produite. Veuillez recharger la page puis réessayer..."),I({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Une erreur s'est produite. Veuillez recharger la page puis réessayer",stopchargement:!0}})}else m("Choisissez votre operateur")}()}}()}):""]}),f&&e("iframe",{src:y,height:"600",width:"100%",style:{border:"none"},name:"demo"})]})},j=({changeVisibleChargementFunc:r,changeVisibleChargementExitFunc:i,cancel_modal_func:l,mode:c})=>{const[d,s]=n.useState(!1);n.useState(""),n.useState(""),n.useState("");const[p,m]=n.useState("");n.useState(!1),n.useState(!1);const[u,h]=n.useState(!1),[f,g]=n.useState(""),{state:y,dispatch:x}=_();n.useState(!1);const[v,N]=n.useState(!0),[C,k]=n.useState(!1),[w,F]=n.useState(!1);n.useState(!1),n.useState(!0),n.useState(!1);const[T,O]=n.useState("choice_section"),[G,R]=n.useState(!1),[B,V]=n.useState(!1),[z,P]=n.useState(""),[L,D]=n.useState(!1),[H,q]=n.useState(!0);return n.useEffect(()=>{console.log(y.num_client.length>8&&y.operator_name.length>0&&y.full_name.length>0&&y.email.length>0&&y.country_code>0&&L),y.num_client.length>4&&y.operator_name.length>0&&y.full_name.length>0&&y.email.length>0&&y.country_code>0&&L&&(async()=>{r();let e=y.token;"SANDBOX"===c&&(e="test_Hg7Kjl3ZAM63UuIUpuudD9nKuu3ZAM67Kjl3Uuhn");let t=y.num_client,a=y.num_client_without_code;"CELTIIS BJ"!==y.operator_name||t.startsWith("0")||(t=`0${t}`,a=`2290${t}`),localStorage.setItem("userInfo__",JSON.stringify({name:(null==y?void 0:y.full_name)||"",email:(null==y?void 0:y.email)||"",phone:(null==y?void 0:y.numClient)||"",network:(null==y?void 0:y.operator_name)||""})),await o.post(`${S}/transactions/requesttopay/integration`,{phoneNumber:t,phoneNumberRight:a,amount:`${y.price}`,reseau:`${y.operator_name}`,token:e,shop:`${y.id}`,first_name:`${y.full_name}`,email:`${y.email}`,reference:`${y.custom_id}`,otp:`${y.code_otp}`,callback_info:`${y.callback_info}`,description:`${y.description}`}).then(e=>{let t=0,a="MOOV CI"==y.operator_name||"FREE SN"==y.operator_name||"ORANGE CI"==y.operator_name||"WAVE CI"==y.operator_name||"ORANGE BF"==y.operator_name||"MOOV BF"==y.operator_name?e.data.order_id:e.data.reference;if(500!==e.status){if("SANDBOX"!==c){"MOOV CI"!=y.operator_name&&"FREE SN"!=y.operator_name&&"ORANGE CI"!=y.operator_name&&"WAVE CI"!=y.operator_name&&"ORANGE BF"!=y.operator_name&&"MOOV BF"!=y.operator_name||(i(),P(e.data.payment_url),F(!1),q(!1),V(!0));const n=setInterval(async()=>{const r=await o.get(`${S}/transactions/getrequesttopay/integration/${a}`),l=r.data.status;"SUCCESSFUL"!==l&&"SUCCESS"!==l&&"Successful"!==l||(t+=1,t<2&&(clearInterval(n),x({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Paiement effectué",stopchargement:!0}}),setTimeout(()=>{if(y.callback&&"function"==typeof y.callback)y.callback({reference:e.data.reference,status:"SUCCESSFUL",phoneNumber:y.num_client,full_name:y.full_name,reseau:y.operator_name,callback_info:y.callback_info,description:y.description,transaction_id:r.data.transaction_id});else if(void 0!==y.callback_url){const t=new URL(y.callback_url);y.callback_url=t.searchParams&&t.searchParams.toString()?`${y.callback_url}&id_transaction=${e.data.reference}&status=SUCCESSFUL`:`${y.callback_url}?id_transaction=${e.data.reference}&status=SUCCESSFUL`,window.location.href=y.callback_url}},2e3))),"FAILED"===l&&(clearInterval(n),x({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Veuillez verifier votre numero ou votre solde.",stopchargement:!0}}),setTimeout(()=>{if(y.callback&&"function"==typeof y.callback)y.callback({reference:a,status:"FAILED",phoneNumber:y.num_client,full_name:y.full_name,reseau:y.operator_name,callback_info:y.callback_info,description:y.description,transaction_id:r.data.transaction_id});else if(void 0!==y.callback_url){i();const e=new URL(y.callback_url);y.callback_url=e.searchParams&&e.searchParams.toString()?`${y.callback_url}&id_transaction=${a}&status=FAILED`:`${y.callback_url}?id_transaction=${a}&status=FAILED`,window.location.href=y.callback_url}},5e3))},5e3);setTimeout(async()=>{const e=await o.get(`${S}/transactions/getrequesttopay/integration/${a}`),t=e.data.status;"FAILED"!==t&&"INPROGRESS"!==t&&"ACCEPTED"!==t&&"INITIATED"!==t&&"PRE_INITIATED"!==t&&"PENDING"!==t&&"IN PENDING STATE"!==t||(x({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Vous n'avez pas accepter la transaction",stopchargement:!0}}),setTimeout(()=>{if(y.callback&&"function"==typeof y.callback)y.callback({reference:a,status:"FAILED",phoneNumber:y.num_client,full_name:y.full_name,reseau:y.operator_name,callback_info:y.callback_info,description:y.description,transaction_id:e.data.transaction_id});else if(void 0!==y.callback_url){i();const e=new URL(y.callback_url);y.callback_url=e.searchParams&&e.searchParams.toString()?`${y.callback_url}&id_transaction=${a}&status=FAILED`:`${y.callback_url}?id_transaction=${a}&status=FAILED`,window.location.href=y.callback_url}},5e3)),clearInterval(n)},18e4)}else if("SUCCESSFUL"===e.data.status){console.log(e),alert("Paiement effectué..."),i();let t=e.data;console.log("datas== ",t),y.callback()&&"function"==typeof y.callback&&(console.log(t),y.callback(t))}}else x({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Une erreur s'est produite. Veuillez recharger la page puis réessayer",stopchargement:!0}})}).catch(e=>{alert("Une erreur s'est produite. Veuillez recharger la page puis réessayer..."),x("Token API invalid"===e.response.data.message?{type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Veuillez contacter l'administrateur du site.",stopchargement:!0}}:{type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Une erreur s'est produite. Veuillez recharger la page puis réessayer",stopchargement:!0}})})})()},[y.num_client,y.operator_name,y.full_name,y.email,y.country_code,L]),t(a,{children:["modal_section"===T&&t(a,{children:[e("div",{className:"pay_with",children:"PAYER AVEC :"}),e(b,{choice_local_func:()=>(k(!1),N(!1),void F(!0))}),e(E,{choice_cardBank_func:()=>(k(!0),N(!1),void F(!1))}),e(U,{onClickCancel:()=>l()})]}),C&&e($,{}),w&&e(j,{changeVisibleChargementFunc:()=>{R(!0)},changeVisibleChargementExitFunc:()=>R(!1)}),"choice_section"===T&&H&&t(a,{children:[e(A,{}),e("div",{className:"error_text_operator",style:{display:u?"block":"none"},children:f}),e(M,{send_pay_form:d,setnum_exist_true:()=>{},setnum_exist_false:()=>{}}),e(I,{pay_func:()=>(!1===d&&s(!0),!0===d&&s(!1),void(""===y.operator_name?(h(!0),m("Choisissez un operateur mobile")):(h(!1),m(""),D(!0))))})]}),B&&e("iframe",{src:z,height:"600",width:"100%",style:{border:"none"},name:"demo"})]})};let q;const Q=i(q||(q=(e=>e)`
@import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');

      .chargement_container{
        width:100vw;
        height:100vh;
        position:fixed;
        top:0px;
        left:0px;
        background-color:#404040a6;
        z-index:1000000000;
        
        flex-direction:column;
        align-items:center;
        justify-coNtent:center;
        
      }
      .message_container{
       
        padding:2rem;
        display:flex;
        flex-direction:column;
        align-items:center;
        width:25%;
        height:25%;
        justify-coNtent:center;
        background-color:#D45D00;
        box-shadow:2px 2px 10px 2px #5a5a5a1f;
        transform:translateY(10px);
      }
      img{
        width:10px;
      }

      .request_msg{
        font-size:0.9rem;
        color:white;
        font-weight:500;
        margin-top:1rem;
        font-family: 'Poppins', sans-serif;
        text-align:center;

      }

      .loader{
        width:50px;
        height:50px;
        border:10px solid white;
        border-top:10px solid #112C56;
        margin:0 auto;
        border-radius:50%;
        animation: spin 2s linear infinite;

      }
      @keyframes spin {
        0%{transform: rorate(0deg)}
        100%{transform:rotate(360deg)}
      }


      
    @media screen and (max-width:700px) {
      .message_container{
        width:60%;
        height:30%;
      }
    }


      
`)),X=({isVisible:r})=>{const{state:i,dispatch:o}=_(),[l,c]=n.useState(!1);return n.useEffect(()=>{!0===r&&(c(!0),o({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"En attente du paiement.",stopchargement:!1}})),!1===r&&c(!1)},[r]),t(a,{children:[e(Q,{}),e("div",{className:"chargement_container",style:{display:l?"flex":"none"},children:t("div",{className:"message_container",style:{backgroundColor:"Paiement effectué"===i.paiement_request_verify_msg?"green":"#D45D00"},children:[e("div",{className:"loader",style:{display:i.stopchargement?"none":"block"}}),e("div",{className:"request_msg",children:i.paiement_request_verify_msg})]})})]})},Y=({isOpen:r,cancel_modal:i,cancel_modal_func:o,name_marchand:l,reference_marchand:c,systemCardPay:d,mode:s,redirectUrlCard:p})=>{const[m,u]=n.useState(!0),[h,f]=n.useState(!1),[y,x]=n.useState(!1),[v,N]=n.useState(!1);return _(),t(a,{children:[e(g,{}),e(X,{isVisible:v}),e("div",{className:"modal_container",style:{position:"fixed !important",zIndex:"10000000000 !important",transition:"all 2s",transform:r&&!1===i?"scale(1)":"scale(0.6)",display:r&&!1===i?"flex":"none"},children:t("div",{className:"modal",children:[t("div",{className:"modal_header",children:[e("div",{className:"logo_container",children:e("img",{className:"logo",src:"https://api.feexpay.me/api/static/feexpay_logo-h.png",alt:"feexpay"})}),t("div",{className:"header_text",children:[e("div",{className:"feexpay_close_btn",onClick:()=>o()}),t("div",{className:"marchant_name",children:["MARCHAND : ",l]})," ",t("div",{className:"id_info",children:[" ID : ",c]})]})]}),t("div",{className:"padding_add",style:{paddingLeft:"2rem",paddingRight:"2rem",height:"94%",overflowY:"scroll"},children:["SANDBOX"===s?e("div",{className:"ModeTestMsg",children:t("p",{children:["Vous êtes en mode ",e("strong",{children:"Test"})]})}):"",m&&t(a,{children:[e("div",{className:"pay_with",children:"PAYER AVEC :"}),e(b,{choice_local_func:()=>(f(!1),u(!1),void x(!0))}),d||""!==d?e(E,{choice_cardBank_func:()=>(f(!0),u(!1),void x(!1))}):null,e(U,{onClickCancel:()=>o()})]}),h&&e($,{systemCardPay:d,mode:s,redirectUrlCard:p}),y&&e(j,{changeVisibleChargementFunc:()=>{N(!0)},changeVisibleChargementExitFunc:()=>N(!1),mode:s})]}),t("div",{className:"secure_by_feexpay",children:[e("div",{className:"lock_line"}),e("div",{className:"img_lock_container",children:e("img",{className:"img_lock",src:"https://api.feexpay.me/api/static/svg/icons8-lock.svg",alt:"icon lock"})}),e("div",{className:"lock_text",children:"Sécurisé par FeexPay"})]}),e("div",{className:"secure_by_feexpay",style:{flexDirection:"column"},children:t("div",{className:"lock_text",children:["En payant via ce plugin, vous acceptez les ",e("a",{href:"https://feexpay.me/termesconditions",target:"_blank",style:{color:"#D45D00",textDecoration:"none"},children:"conditions générales d'utilisation"})," de FeexPay."]})}),e("div",{className:"footer_modal_container",children:e("div",{className:"footer_modal"})})]})})]})},J=({amount:r,token:i,id:l,callback:c,callback_url:d,description:s,callback_info:p,reference:u,fieldsToHide:_,buttonText:f,buttonStyles:g,buttonClass:y,defaultValueField:x,mode:b="LIVE",redirectUrlCard:v="https://app.feexpay.me/checkout-status",currency:N="XOF"})=>{const[C,k]=n.useState(!1),[E,w]=n.useState(!0),[A,F]=n.useState(!1),[T,M]=n.useState(""),[O,G]=n.useState(""),[I,R]=n.useState(""),B=r;return n.useEffect(()=>{!async function(){await o.get(`${S}/shop/${l}/get_shop`).then(e=>{const t=null==e?void 0:e.data;t&&(M(t.name),G(t.reference),F(!0),R(t.systemCardPay||"Bizao"))}).catch(e=>{"Le format de l'id est"===e.response.data.message&&(M(""),G(""),F(!1))})}()},[]),e(a,{children:t(m,{amount:B,token:i,id:l,callback:c,callback_url:d,description:s,callback_info:p,reference:u,fieldsToHide:_,buttonText:f,buttonStyles:g,buttonClass:y,defaultValueField:x,children:[e(Y,{token:i,systemCardPay:I,isOpen:C,cancel_modal:E,cancel_modal_func:()=>(k(!1),void w(!0)),name_marchand:T,reference_marchand:O,mode:b,redirectUrlCard:v}),e(h,{open_modal:()=>(k(!0),void w(!1)),feexVisisbleBtn:A,buttonText:f,buttonStyles:g,buttonClass:y})]})})};export{J as default};
