import{jsx as e,jsxs as n,Fragment as t}from"react/jsx-runtime";import a from"react";import r,{createGlobalStyle as i}from"styled-components";import o from"axios";function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},l.apply(this,arguments)}function c(e,n){return n||(n=e.slice(0)),e.raw=n,e}var d,s=i(d||(d=c(["\n      .button {\n        background-color:#112C56;\n        color:white;\n        text-align:center;\n        padding:10px;\n        border:none;\n        width:100%;\n        justify-content:center;\n        align-items:center;\n        flex-direction:row;\n        border-radius:0.5rem;\n        cursor:pointer;\n\n      }\n      .button_text{\n         font-size:1rem;\n         font-weight:800;\n      }\n      img{\n        width:100px;\n      }\n      .choice_text {\n        font-size:0.8rem;\n      }\n"])));function m(e,n){try{switch(n.type){case"CHANGE/OPERATOR":case"CHANGE/EMAIL":case"CHANGE/FULLNAME":case"CHANGE/NAME_CARD":return l({},e,n.payload);case"CHANGE/COUNTRY_CODE":return l({},e,{country_code:n.payload.country_code});case"CHANGE/OPERATOR_NAME":return l({},e,{operator_name:n.payload.operator_name});case"CHANGE/NUMERO_CLIENT":return l({},e,{num_client_without_code:n.payload.num_client,num_client:""+e.country_code+n.payload.num_client});case"CHANGE/CODE_OTP":return l({},e,{code_otp:n.payload.code_otp});case"CHANGE/NUMWITHOUTCODE":return l({},e,{num_client_without_code:n.payload.num_client_without_code});case"CHANGE/REQUESTMESSAGE":return l({},e,{paiement_request_verify_msg:n.payload.paiement_request_verify_msg,stopchargement:n.payload.stopchargement});case"CHANGE/REQUESTTOPAYINFO":return e;default:throw new Error("Message")}}catch(n){return console.error("Une erreur est survenue dans le reducer :",n),e}}var u,p,f,_,h,g,y,x,b,v={},N=function(n){var t,r,i,o,l,c,d=n.children,s=n.amount,u=n.apiURL,p=n.token,f=n.id,_=n.reference,h=n.callback,g=n.description,y=n.callback_info,x=n.callback_url,b=n.fieldsToHide,N=n.buttonText,k=n.buttonStyles,S=n.defaultValueField,E=localStorage.getItem("userInfo__");E=JSON.parse(E),console.log("userInfoLocal == ",E),v={price:s,apiURL:u,token:p,id:f,operator_name:"",custom_id:_||"",code_otp:"",callback_info:y,description:g,country_code:"",num_client:"",num_client_without_code:"",paiement_request_verify_msg:"En attente de paiement.",stopchargement:!1,requesttopayinfo:{},name_marchand:"",reference_marchand:"",email:(null==(t=E)?void 0:t.email)||"",full_name:(null==(r=E)?void 0:r.name)||"",callback:h,callback_url:x,numero_card:(null==(i=E)?void 0:i.phone)||"",name_card:(null==(o=E)?void 0:o.name)||"",email_card:(null==(l=E)?void 0:l.email)||"",title_card:"",address_card:"",locality_card:"",last_name_card:(null==(c=E)?void 0:c.lastName)||"",fieldsToHide:b,buttonText:N,buttonStyles:k,defaultValueField:S};var w=a.useReducer(m,v),A=w[0],F=w[1],T=a.useMemo(function(){return{state:A,dispatch:F}},[A,F]);return e(C.Provider,{value:T,children:d})},C=a.createContext({state:v,dispatch:function(){}}),k=function(){return a.useContext(C)},S=function(a){var r=a.open_modal,i=a.feexVisisbleBtn,o=a.buttonText,c=a.buttonStyles,d=a.buttonClass;return k(),n(t,{children:[e(s,{}),e("button",{onClick:function(){return r()},className:""+(d||"button"),style:l({display:i?"flex":"none"},c),children:e("span",{className:"button_text",style:{marginRight:"5px"},children:o})})]})},E=i(u||(u=c(['\n.ModeTestMsg {\n    padding: 6px;\n    background: #112b56;\n    text-align: center;\n    margin-bottom: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.ModeTestMsg p {\n    font-size: 14px;\n    text-align: center;\n    color: white\n}\n.feexpay_close_btn{\n    background-color: crimson;\n    border-radius: 5rem;\n    transform: translateX(100%) translateY(-100%);\n    cursor: pointer;\n    height:30px;\n    width: 30px;\n    background-image: url("https://api.feexpay.me/api/static/cross-23.png");\n    background-size: cover;\n    background-position: center;\n    float: right;\n   \n  \n  }\n\n  .width-100 {\n    width: 100% !important;\n}\n    .modal_container{\n        position:fixed;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n        background-color:rgba(0, 0, 0, 0.7);\n        height:100vh;\n        width:100vw;  \n        z-index:100000000 !important;\n        margin:0px;\n        padding:0px;\n        flex-direction:column;\n        top:0px;\n        left:0px;\n        \n    }\n\n    .modal{\n       display:grid;\n       flex-direction:column;\n       width:40%;\n       height:92%;\n       background-color: #f8f9fa !important;\n       color:black;\n\n      \n    }\n\n    .modal .modal_header{\n        display:flex;\n        flex-direction:row;\n        width:100%;\n        margin-bottom:2rem;\n        box-shadow: 2px 3px 9px -4px rgba(0, 0, 0, 0.397);\n        border-bottom-left-radius:1rem;\n        border-bottom-right-radius:1rem;\n        height: fit-content;\n    }\n\n    .modal .header_text{\n        font-size:0.7rem;\n        color:black;\n        width:60%;\n        text-align:right;\n        padding-right: 1rem;\n        padding-top: 0.5rem;\n        height:fit-content;\n\n        \n        \n        \n    }\n    .modal .logo_container{\n        width:40%;\n        padding-top: 0.5rem;\n        padding-left:1rem;\n        height:fit-content;\n    }\n    .modal .logo_container .logo {\n        width:100px;\n\n    }\n    .pay_with{\n        font-size:1rem;\n        font-weight:800;\n        color:darkblue;\n    }\n\n    .footer_modal_container{\n        width:100%;\n        height:6%;\n        background-color:white;\n        align-self:flex-end;\n        display:flex;\n        align-items:flex-end;\n        justify-self:flex-end;\n      \n    }\n\n    .footer_modal{\n        width: 100%;\n        height: 30px;\n        background-color: #112C56;\n        background-image: url("https://api.feexpay.me/api/static/motif_footer.svg");\n        background-size: cover;\n        background-position: center;\n        \n\n    }\n\n    .secure_by_feexpay{\n        display:flex;\n        flex-direction:row;\n        align-items:center;\n        justify-content:center;\n      }\n      .img_lock{\n        width:15px;\n        margin-right:0.2rem;\n\n      }\n    \n      .lock_line{\n        background-color:#112C56;\n        width:6px;\n        height:1px;\n      }\n      .lock_text{\n        font-size:0.7rem;\n      }\n\n      @media (min-width: 320px) {\n        body {\n            color: #626262;\n        }\n    }\n\n\n    \n    \n    @media (min-width: 992px) {\n        \n    }\n\n    @media (min-width: 1200px) {\n        \n    }\n\n    @media (min-width: 650px) and (max-width: 850px) {\n        \n        .modal{\n            width:75%;\n            height:100%;\n         }\n\n         .feexpaycardBankForm .titulaire_input {\n            width: auto !important;\n        }\n    }\n\n    @media (max-width: 768px) {\n        \n    }\n\n    @media (min-width: 950px) and (max-width:1025px) {\n        .modal{\n            width:65%;\n            height:100%;\n        }\n    }\n\n    @media (min-width: 651px) and (max-width:900px) {\n        .modal{\n            width:80%;\n            height:100%;\n        }\n        .footer_modal_container{\n            width:100%;\n        }\n    }\n\n    @media (max-width:700px) {\n        .modal_container{\n            /*height:100vh;*/\n            /*width:200vw;*/ \n        }\n\n        .modal{\n            width:100%;\n            height:100%;\n        }\n\n        .choice_operator_img{\n            flex-direction:column;\n        }\n        \n    }\n\n    \n']))),w=r.div(p||(p=c(["\n     transition:all 1s;\n     border:solid 1.5px gray;\n     display:flex;\n     flex-direction:row;\n     align-items:center;\n     width:100%;\n     margin-top:1rem;\n     transform-origin: center;\n     cursor:pointer;\n     \n     :hover{\n       transition:all 1s;\n       border:solid 1.5px orangered;\n     }\n\n     \n     .image_choice{\n        display:flex;\n        flex-direction:row;\n        justify-content:end;\n        align-items:center;\n        position:relatif;\n        right:1rem;\n        justify-self:flex-end;\n        padding-top:8px;\n        padding-bottom:8px;\n        width:50%;\n       \n     }\n     .image_choice img{\n      width:40px;\n     }\n     .input_choice,.choice_text{\n        margin-left:0.5rem;\n     }\n     .img_moov{\n        margin-right:2rem;\n     }\n     .img_mtn{\n       margin-right:1rem\n     }\n     .text_container{\n        width:70%;\n        display:flex;\n        align-items:center;\n        flex-direction:row;\n\n     }\n\n \n   \n\n"]))),A=function(t){var a=t.choice_local_func;return e(w,{children:n("div",{className:"text_container",onClick:function(){return a()},style:{height:"45px"},children:[e("input",{onClick:function(){return a()},className:"input_choice",type:"radio",name:"isClicked",id:""}),e("div",{onClick:function(){return a()},className:"choice_text",children:"Mobile Money"})]})})},F="https://api.feexpay.me/api/static/Flag_of_Togo.svg.png",T="https://api.feexpay.me/api/static/Flag_of_Benin.svg.png",M="https://api.feexpay.me/api/static/Flag_of_Rwanda.svg.png",G="https://api.feexpay.me/api/static/CI.png",O="https://api.feexpay.me/api",I=function(t){var a=t.choice_cardBank_func;return n(w,{children:[n("div",{className:"text_container",onClick:function(){return a()},children:[e("input",{onClick:function(){return a()},className:"input_choice",type:"radio",name:"isClicked",id:""}),e("div",{onClick:function(){return a()},className:"choice_text",children:"Cartes bancaires"})]}),n("div",{className:"image_choice",onClick:function(){return a()},children:[e("img",{className:"img_mtn",src:"https://api.feexpay.me/api/static/logo_visa.svg",alt:""}),e("img",{className:"img_moov",src:"https://api.feexpay.me/api/static/logo_mastercard.svg",alt:""})]})]})},R=i(f||(f=c(["\n//Modal notify\n.ModalInfos {\n   width: 100vw;\n   height: 100vh;\n   position: fixed;\n   top: 0;\n   left: 0;\n   background-color: #00000075;\n   display: flex;\n   align-items: center;\n   justify-content: center;\n }\n \n .ModalInfos__center {\n   width: 400px;\n   background-color: #112C56;\n   display: flex;\n   align-items: center;\n   flex-direction: column;\n   padding: 20px 30px;\n   border-radius: 5px;\n }\n\n .ModalInfos__btn {\n   padding: 6px 15px;\n   font-size: 14px;\n   background: #d56209;\n   color: white;\n   border-radius: 4px;\n   margin-top: 15px;\n }\n\n .ModalInfos__text {\n   font-size: 14px;\n   color: white;\n   text-align: center;\n   line-height: 25px;\n }\n\n \n    .choice_operator_card{\n        width:100%;\n        border-bottom:solid 1.9px black;\n        display:flex;\n        flex-direction:row;\n        align-items:center;\n        justify-content:center;\n    }\n\n    .choice_operator_text{\n         width:auto;\n         font-weight:500;\n         font-size: 16px;\n         margin-bottom: 15px;\n    }\n    .choice_operator_img{\n        display:flex;\n        width:40%;\n        justify-content:flex-end;\n        align-items:center;\n        flex-direction:row;\n\n    }\n    .choice_operator_img input{\n        margin-right:0.3rem;\n    }\n    .choice_operator_img img{\n        width:45px;\n        padding-top:8px;\n        padding-bottom:8px;\n        \n    }\n\n\n    .choice_mtn{\n        display:flex;\n        align-items:center;\n        justify-content:center;\n        flex-direction:row;\n  \n  \n     }\n     .choice_moov{\n        display:flex;\n        align-items:center;\n        justify-content:center;\n        flex-direction:row;\n     }\n    \n\n\n    .img_mtn{\n        margin-right:1rem;\n    }\n\n.error_text_operator{\n    font-size:0.6rem;\n    color:crimson;\n    margin-top:0.5rem;\n}\n    @media screen and (max-width:960px){\n      \n        .img_mtn{\n            margin-right:0px;\n        }\n        .choice_operator_img{\n           display:flex; \n           align-items:center;\n           justify-content:flex-end;  \n           /*flex-direction:column;*/\n        }\n        .choice_mtn{\n           display:flex;\n     \n        }\n        .choice_moov{\n            display:flex;\n        }\n        .img_mtn{\n           margin-right:0px;\n        }\n     \n     \n     }\n"]))),B=i(_||(_=c([" \n    .margin{\n        margin-top:1rem;\n        margin-bottom:1rem;\n    }\n\n    .feexpay_input_simple{\n        border: 1px solid #ced4da;\n        border-radius: 5px;\n        outline:none;\n        /*border-bottom: solid 1.5px #00000071;*/\n        padding-bottom:10px;\n        padding-top:10px;\n        padding-left:10px;\n        width: -webkit-fill-available;\n        margin-bottom: 1.5rem;\n        margin-top: 5px;\n        background-color: transparent;\n    }\n    \n    \n    .num_operator_card{\n        width:100%;\n        display:flex;\n        flex-direction:column;\n\n    }\n    .num_input_container{\n        width:100%;\n        display:flex;\n        flex-direction:row;\n        align-items:center;\n        border: 1px solid #ced4da;\n        border-radius: 5px;\n        /*border-bottom:solid 2px black;*/\n    }\n    .flag{\n        width:10%;\n        text-align: center !important;\n    }\n    .input_num{\n        border:none !important;\n        outline:none !important;\n        background-color: transparent;\n        padding:10px !important;\n        width: -webkit-fill-available;\n    }\n    .flag .img_flag{\n        width:25px !important;\n        text-align: center;\n    }\n\n    .num_flag_container{\n        width:30%;\n        padding:0px;\n        background-color:white;\n        box-shadow:1px 1px 20px 0.2px lightgrey;\n        display:flex;\n        flex-direction:column;\n        transform:translateY(40%);\n        position:absolute;\n        \n    }\n    .flag_info_container{\n        transition:all 1s;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n        padding:3px;\n        padding-left:0px;\n        cursor:pointer;\n\n    }\n    .flag_info_container:hover{\n        transition:all 1s;\n        background-color:whitesmoke;\n\n    }\n\n    .flag_container img{\n        width:25px;\n    }\n    .flag_conyainer{\n        width:10%;\n        padding-top:5px;\n    }\n    .flag_name{\n        width:90%;\n        text-align:right;\n        padding-right:1rem;\n        font-size:0.8rem;\n    }\n    .error_text_operator_input{\n        font-size:0.6rem;\n        color:crimson;\n        margin-top:0.5rem;\n    }\n    \n    .custom-select {\n      display: inline-block;\n      width: 100%;\n      height: calc(1.5em + 0.75rem + 2px);\n      padding: 0.375rem 1.75rem 0.375rem 0.75rem;\n      font-size: 1rem;\n      font-weight: 400;\n      line-height: 1.5;\n      color: #495057;\n      vertical-align: middle;\n      background: #fff url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") right 0.75rem center/8px 10px no-repeat;\n      border: 1px solid #ced4da;\n      border-radius: 0.25rem;\n      -webkit-appearance: none;\n      -moz-appearance: none;\n      appearance: none;\n    }\n    \n    .custom-select:focus {\n      border-color: #80bdff;\n      outline: 0;\n      box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n    }\n    \n    .custom-select:focus::-ms-value {\n      color: #495057;\n      background-color: #fff;\n    }\n    \n    .custom-select[multiple], .custom-select[size]:not([size=\"1\"]) {\n      height: auto;\n      padding-right: 0.75rem;\n      background-image: none;\n    }\n    \n    .custom-select:disabled {\n      color: #6c757d;\n      background-color: #e9ecef;\n    }\n    \n    .custom-select::-ms-expand {\n      display: none;\n    }\n    \n    .custom-select:-moz-focusring {\n      color: transparent;\n      text-shadow: 0 0 0 #495057;\n    }\n    \n    .custom-select-sm {\n      height: calc(1.5em + 0.5rem + 2px);\n      padding-top: 0.25rem;\n      padding-bottom: 0.25rem;\n      padding-left: 0.5rem;\n      font-size: 0.875rem;\n    }\n    \n    .custom-select-lg {\n      height: calc(1.5em + 1rem + 2px);\n      padding-top: 0.5rem;\n      padding-bottom: 0.5rem;\n      padding-left: 1rem;\n      font-size: 1.25rem;\n    }\n    \n    @media screen and (max-width:700px) {\n         .num_flag_container{\n             width:85%;\n        }\n\n    }\n"]))),P=function(r){var i,o,l,c,d,s=r.send_pay_form,m=r.setnum_exist_false,u=r.setnum_exist_true,p=k(),f=p.state,_=p.dispatch,h=a.useState(!1),g=h[0],y=h[1],x=a.useState(1),b=x[0],v=x[1];a.useState(null);var N=a.useState(!1),C=N[0],S=N[1],E=a.useState(""),w=E[0],A=E[1];a.useState("");var O=a.useState(""),I=O[0],R=O[1],P=a.useState("")[1],U=a.useState(""),V=U[0],z=U[1],L=a.useState(""),D=L[0],H=L[1];a.useState("");var j=a.useState(""),q=j[0],Q=j[1],Y=a.useState(""),J=Y[0],X=Y[1];a.useState(""),a.useState("229");var W=a.useState(""),K=W[0],Z=W[1],$=a.useState(!1),ee=$[0],ne=$[1],te=a.useState(""),ae=te[0],re=te[1],ie=a.useState(""),oe=ie[0],le=ie[1],ce=[{code:"229",name:"Bénin",country_code:"BJ"},{code:"226",name:"Burkina-Faso",country_code:"BF"},{code:"225",name:"Côte d'Ivoire",country_code:"CI"},{code:"242",name:"Congo Brazzaville",country_code:"CG"},{code:"221",name:"Sénégal",country_code:"SN"},{code:"228",name:"Togo",country_code:"TG"}],de={229:[{value:"MOOV",label:"MOOV"},{value:"MTN",label:"MTN"},{value:"CELTIIS BJ",label:"CELTIIS"}],226:[{value:"MOOV BF",label:"MOOV"},{value:"ORANGE BF",label:"ORANGE"}],225:[{value:"MOOV CI",label:"MOOV"},{value:"MTN CI",label:"MTN"},{value:"WAVE CI",label:"WAVE"},{value:"ORANGE CI",label:"ORANGE"}],228:[{value:"MOOV TG",label:"MOOV"},{value:"TOGOCOM TG",label:"TOGOCOM"}],221:[{value:"ORANGE SN",label:"ORANGE"},{value:"FREE SN",label:"FREE"}],242:[{value:"MTN CG",label:"MTN CG"}]},se=function(e){return(f.fieldsToHide||[]).includes(e)};return a.useEffect(function(){if(f.defaultValueField&&f.defaultValueField.country_iban){var e,n=f.defaultValueField.country_iban,t=f.defaultValueField.name,a=f.defaultValueField.email,r=f.defaultValueField.network?f.defaultValueField.network.toUpperCase():f.defaultValueField.network;if(_({type:"CHANGE/COUNTRY_CODE",payload:{country_code:e="BJ"===n?229:"BF"===n?226:"CI"===n?225:"SN"===n?221:"CG"===n?242:"TG"===n?228:229}}),re(e),ne("ORANGE SN"===r||"ORANGE"===r),de[e]){var i,o=null==(i=de[e].find(function(e){return e.label===f.defaultValueField.network}))?void 0:i.value;le(o||r),_({type:"CHANGE/OPERATOR_NAME",payload:{operator_name:o}})}else le(r);_({type:"CHANGE/FULLNAME",payload:{full_name:t}}),H(t),_({type:"CHANGE/EMAIL",payload:{email:a}}),z(a)}console.log(f)},[f.defaultValueField]),a.useEffect(function(){Z(0===oe.length?"Sélectionnez le réseau":""),se("email")&&z("johndoe@gmail.com"),se("full_name")&&H("John"),0===V.length?Q("Entrez votre email"):(Q(""),_({type:"CHANGE/EMAIL",payload:{email:V}})),0===D.length?X("Entrez votre nom et prenom"):(X(""),_({type:"CHANGE/FULLNAME",payload:{full_name:D}})),Number.isNaN(parseInt(I))?(S(!0),A("Entrez votre numéro"),m()):(S(!1),A(""),u())},[s]),n(t,{children:[e(B,{}),n("div",{children:[e("label",{htmlFor:"countrySelect",style:{marginBottom:"1rem"},children:"Sélectionnez un pays :"}),null!=(i=f.defaultValueField)&&i.country_iban?e("div",{className:"",style:{marginTop:"1rem",width:"-webkit-fill-available",height:"auto",display:"flex",alignItems:"center",border:"1px solid #ccc",padding:"0.5rem",borderRadius:"4px"},children:e("span",{style:{marginLeft:"0.5rem"},children:null==(o=ce.find(function(e){return e.country_code===f.defaultValueField.country_iban}))?void 0:o.name})}):n("select",{className:"custom-select",id:"countrySelect",value:ae,style:{marginTop:"1rem"},onChange:function(e){re(e.target.value),le(""),_({type:"CHANGE/COUNTRY_CODE",payload:{country_code:e.target.value}})},children:[e("option",{value:"",children:"Choisissez un pays"}),ce.map(function(n){return e("option",{value:n.code,children:n.name},n.code)})]})]}),ae&&de[ae]&&n("div",{className:"margin",children:[e("label",{htmlFor:"networkSelect",style:{marginTop:"1rem",marginBottom:"1.2rem"},children:"Choisissez un réseau :"}),null!=(l=f.defaultValueField)&&l.network?e("div",{className:"",style:{marginTop:"1rem",width:"-webkit-fill-available",height:"auto",display:"flex",alignItems:"center",border:"1px solid #ccc",padding:"0.5rem",borderRadius:"4px"},children:e("span",{style:{marginLeft:"0.5rem"},children:f.defaultValueField.network})}):n("div",{children:[n("select",{className:"custom-select",id:"networkSelect",value:oe,style:{marginTop:"1rem"},onChange:function(e){le(e.target.value),_({type:"CHANGE/OPERATOR_NAME",payload:{operator_name:e.target.value}}),ne("ORANGE SN"===e.target.value)},children:[e("option",{value:"",children:"Sélectionnez le réseau mobile"}),de[ae].map(function(n){return e("option",{value:n.value,children:n.label},n.value)})]}),e("div",{className:"feepay_fullname_error error_text_operator_input",style:{display:"block",marginBottom:"1.5rem"},children:K})]})]}),n("div",{children:[!se("full_name")&&e("div",{className:"margin",style:{display:"block",marginBottom:"1.5rem"},children:n("div",{children:[e("label",{children:"Nom et prénoms"}),null!=(c=f.defaultValueField)&&c.name?e("div",{className:"",style:{marginTop:"1rem",width:"-webkit-fill-available",height:"auto",display:"flex",alignItems:"center",border:"1px solid #ccc",padding:"0.5rem",borderRadius:"4px"},children:e("span",{style:{marginLeft:"0.5rem"},children:f.defaultValueField.name})}):n("div",{children:[e("input",{autoComplete:"off",className:"feexpay_fullname_input feexpay_input_simple feexpay_input_fullname input_simple",type:"text",style:{marginBottom:"0px",marginTop:"0.25rem"},onChange:function(e){H(e.target.value),function(e){0!==e.target.value.length&&_({type:"CHANGE/FULLNAME",payload:{full_name:e.target.value}})}(e)},placeholder:"John Don"}),e("div",{className:"feepay_fullname_error error_text_operator_input",children:J})]})]})}),!se("email")&&e("div",{style:{display:"block",marginBottom:"1.5rem"},children:n("div",{children:[e("label",{children:"Adresse mail"}),null!=(d=f.defaultValueField)&&d.email?e("div",{className:"custom-select",style:{marginTop:"1rem",width:"-webkit-fill-available",height:"auto",display:"flex",alignItems:"center",border:"1px solid #ccc",padding:"0.5rem",borderRadius:"4px"},children:e("span",{style:{marginLeft:"0.5rem"},children:f.defaultValueField.email})}):n("div",{children:[e("input",{autoComplete:"off",className:"feexpay_email_input feexpay_input_simple feexpay_input_email input_simple",type:"email",style:{marginBottom:"0px",marginTop:"0.25rem"},placeholder:"example@gmail.com",onChange:function(e){z(e.target.value),function(e){0!==e.target.value.length&&_({type:"CHANGE/EMAIL",payload:{email:e.target.value}})}(e)}}),e("div",{className:"feepay_email_error error_text_operator_input",children:q})]})]})}),e("label",{htmlFor:"input_num",children:"Numéro de téléphone(sans indicatif)"}),n("div",{className:"num_operator_card",children:[e("div",{className:"num_input_container",children:e("input",{autoComplete:"off",className:"input_num",style:{marginTop:"0.25rem"},type:"tel",name:"input_num",onChange:function(e){R(e.target.value),function(e){Number.isNaN(parseInt(e.target.value))||_({type:"CHANGE/NUMERO_CLIENT",payload:{num_client:e.target.value}})}(e)},placeholder:function(){switch(b){case 1:return{flagLink:T,placeholder:"0195020304"};case 2:return{flagLink:F,placeholder:"05340312"};case 3:return{flagLink:G,placeholder:"01204502"};case 4:return{flagLink:M,placeholder:"04022304"};default:return null}}().placeholder})}),n("div",{className:"num_flag_container",style:{display:g?"flex":"none"},children:[n("div",{onClick:function(){v(1),y(!1)},className:"flag_info_container",children:[e("div",{className:"flag_container",children:e("img",{src:T,alt:""})}),e("div",{className:"flag_name",children:"Bénin"})]}),n("div",{onClick:function(){v(2),y(!1)},className:"flag_info_container",children:[e("div",{className:"flag_container",children:e("img",{src:F,alt:""})}),e("div",{className:"flag_name",children:"Togo"})]}),n("div",{onClick:function(){v(3),y(!1)},className:"flag_info_container",children:[e("div",{className:"flag_container",children:e("img",{src:G,alt:""})}),e("div",{className:"flag_name",children:"Côte d'Ivoire"})]}),n("div",{onClick:function(){v(4),y(!1)},className:"flag_info_container",children:[e("div",{className:"flag_container",children:e("img",{src:M,alt:""})}),e("div",{className:"flag_name",children:"Rwanda"})]})]})]}),e("div",{className:"error_text_operator_input",style:{display:C?"block":"none"},children:w}),ee&&n("div",{className:"num_operator_card",children:[e("label",{style:{marginTop:"1.2rem",marginBottom:"1rem"},htmlFor:"input_num",children:"Code OTP* (Obtenez ce code en tapant *144*391#) :"}),e("div",{className:"num_input_container",children:e("input",{type:"number",id:"otp_input",name:"input_num",className:"input_num",onChange:function(e){P(e.target.value),function(e){Number.isNaN(parseInt(e.target.value))||_({type:"CHANGE/CODE_OTP",payload:{code_otp:e.target.value}})}(e)}})})]})]})]})},U=i(h||(h=c(["\n      .button_container{\n        width:100%;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n        flex-direction:column;\n      }\n      .button_pay{\n          background-color:#112C56;\n          color:white;\n          text-align:center;\n          padding:10px;\n          border:none;\n          display:flex;\n          justify-content:center;\n          align-items:center;\n          flex-direction:row;\n          cursor:pointer;\n          border-radius:10px;\n          margin-top: 0.5rem;\n          width: fit-content;\n      }\n      .button_text{\n        font-size:0.8rem;\n        font-weight:500;\n      }\n\n      .button_back{\n        background-color: #f8f9fa !important;\n        color: #112C56 !important;\n        margin-right: 2px !important;\n        border: 1px solid #112C56 !important;\n    }\n\n      @media screen and (max-width:960px) {\n        .button_pay{\n          width:100%;\n         }\n    }\n"]))),V=function(a){var r=a.pay_func,i=k().state;return n(t,{children:[e(U,{}),e("div",{className:"button_container",children:e("button",{onClick:function(){return r()},className:"button_pay",children:n("span",{className:"button_text",children:["Payer ",i.price," XOF"]})})})]})},z=r.div(g||(g=c(["\n     transition:all 1s;\n     border:solid 1.5px gray;\n     display:flex;\n     flex-direction:row;\n     align-items:center;\n     width:100%;\n     margin-top:1rem;\n     transform-origin: center;\n     height:56px;\n\n     :hover{\n        transition:all 1s;\n        border:solid 1.5px orangered;\n     }\n     .input_choice,.choice_text{\n        margin-left:0.5rem;\n     }\n     \n\n"]))),L=function(t){var a=t.onClickCancel;return n(z,{children:[e("input",{onClick:function(){return a()},className:"input_choice",type:"radio",name:"isClicked",id:""}),e("div",{onClick:function(){return a()},className:"choice_text",children:"Annuler le paiement"})]})},D=function(a){var r=a.pay_func,i=k().state;return n(t,{children:[e(U,{}),e("div",{className:"button_container",children:e("button",{onClick:function(){return r()},className:"button_pay",children:n("span",{className:"button_text",children:["Payer ",i.price," XOF"]})})})]})},H=i(y||(y=c(["\n \n// card step 2\n.CardStep2__field,\n.CardStep2 {\n    display: flex;\n    flex-direction: column;\n}\n.CardStep2 {\n    width: 100%;\n    gap: 13px;\n}\n\n.CardStep2__field {\n    gap: 8px;\n}\n\n.CardStep2__label {\n    font-size: 14px;\n}\n\n.CardStep2_divField {\n    display: flex;\n    gap: 20px;\n    width: 100%;\n}\n\n.CardStep2_divField label {\n    width: 50%;\n}\n\n.CardStep2__input {\n    width: 100%;\n    border-radius: 7px;\n    border: 1px solid rgb(187, 187, 187);\n    background-color: rgb(238, 238, 238);\n    font-size: 14px;\n    outline: none;\n    padding: 10px 0;\n    text-indent: 10px;\n    color: black;\n}\n\n.Pay_btn_flw {\n   padding: 14px 80px;\n   background: #112b56e5;\n   color: white;\n   font-size: 17px;\n   outline: none;\n   border: none;\n   border-radius: 5px;\n   cursor: pointer\n}\n\n.CardStep2__cvn {\n    width: 48%;\n}\n\n.CardStep2__btns{\n    width: 100%;\n    display: flex;\n    justify-content: end;\n    gap: 6px\n}\n\n.CardStep2__btnNext {\n   color: white;\n   background: #112b56e5;\n}\n\n.CardStep2__btnPrev {\n   outline: none;\n   border: 1px solid #112b56e5;\n   border-radius: 5px;\n   background: none;\n   padding: 14px 16px\n   color: #112b56e5;\n   cursor: pointer\n}  \n\n.CardStep2__error {\n   font-size: 13px;\n   color: red;\n}\n\n.feexpaycardBankForm .form_pay{\n   width:100%;\n \n}\n\n\n.feexpaycardBankForm .titulaire_info_container{\n     display:flex;\n     flex-direction:column;\n     margin-top:0.3rem;\n\n}\n\n.feexpaycardBankForm .titulaire_input{\n   display:flex;\n   flex-direction:row;\n   width:100%;\n   /*background-color:#cfcfcf;*/\n   border-radius:0px;\n   justify-content: inherit;\n}\n.feexpaycardBankForm .titulaire_lab{\n   margin-bottom:5px;\n   margin-top:0px;\n   font-size: 0.8rem;\n}\n\n.feexPayMobilePay .choice_operator_card{\n   width:100%;\n   border-bottom:solid 1.5px #00000071;\n   display:flex;\n   flex-direction:row;\n   align-items:center;\n   justify-content:center;\n}\n\n.color_card_type {\n    border: 1px solid #112C56 !important;\n    border-radius: 2px !important;\n    padding-top: 0 !important;\n    padding-bottom: 0 !important;\n}\n\n.feexPayMobilePay .choice_operator_text{\n    width:60%;\n    display:flex;\n    align-items:center;\n    font-weight:700;\n    font-size:0.8rem;\n}\n\n.feexPayMobilePay .choice_operator_img{\n   display:flex;\n   width:40%;\n   justify-content:flex-end;\n   align-items:center;\n   flex-direction:row;\n\n}\n.feexPayMobilePay .choice_operator_img input{\n   margin-right:0.3rem;\n}\n.feexPayMobilePay .choice_operator_img img{\n   width:45px;\n   padding-top:8px;\n   padding-bottom:8px;\n   \n}\n\n\n\n.feexpaycardBankForm .input_container{\n    width:90%;\n}\n.feexpaycardBankForm .input_info{\n   background-color:#fffcfc;\n    border:none;\n    outline:none;\n    padding:10px;\n    width:100%;\n    border: 1px solid #5a5a5a69;\n    border-radius: 2px;\n\n}\n.feexpaycardBankForm .input_info::placeholder{\n   font-size: 0.7rem;\n}\n\n.feexpaycardBankForm .input_customer{\n   width: 85%;\n}\n.feexpaycardBankForm .input_customer_prenom{\n   float: right;\n}\n.feexpaycardBankForm .input_info:focus{\n  background-color:whitesmoke;\n}\n.feexpaycardBankForm .img_container{\n   display:flex;\n \n}\n.feexpaycardBankForm .img_user{\n     width:25px;\n     margin-right:1rem;\n}\n\n\n.feexpaycardBankForm .other_info_container{\n   display:flex;\n   justify-content:center;\n   align-items:center;\n   flex-direction:row;\n   width:100%;\n   margin-top:0.3rem;\n \n}\n\n.feexpaycardBankForm .expiration_date,.cryptogramme{\n     width:50%;\n     display:flex;\n     flex-direction:column;\n\n}\n\n.feexpaycardBankForm .cryptogramme{\n display:flex;\n justify-content:flex-end;\n \n \n}\n.feexpaycardBankForm .cryptogramme_custom{\n   width:70% !important;\n   align-items:flex-end !important;\n }\n.feexpaycardBankForm .expiration_date_custom{\n   width:30% !important;\n}\n.cryptogramme .titulaire_lab_prenom{\n   padding-left:12%;\n}\n\n.feexpaycardBankForm .date_expiration_input,.feexpaycardBankForm .cryptogramme_input{\n     width:83%;\n     padding:15px;\n     background-color:#cfcfcf;\n     border:none;\n     outline:none;\n     border-radius:0.5rem;\n}\n.feexpaycardBankForm .cryptogramme_custom .input_w{\n     width:87% !important;\n }\n\n\n.feexpaycardBankForm .cryptogramme_input:focus{\n background-color:whitesmoke;\n}\n.feexpaycardBankForm .date_expiration_input:focus{\n background-color:whitesmoke;\n}\n.feexpay_modal_container .padding_add{\n    padding-left: 2rem;\n    padding-right: 2rem;\n    height: 95%;\n    overflow-y: scroll !important;\n    \n}\n.feexpay_container_form{\n   height: 100%;\n   display: grid;\n   flex-direction: column;\n   justify-content: flex-end;\n   align-items: center;\n}\n\n@media screen and (max-width:924px) {\n     .feexpaycardBankForm .expiration_date,.feexpaycardBankForm .cryptogramme{\n         width:100%;\n         padding:0px;\n\n      }\n      .feexpaycardBankForm .titulaire_lab{\n         \n           margin-top:10px;\n       \n      }\n   \n      .cryptogramme .titulaire_lab_prenom{\n         padding: 0%;\n      }\n      .feexpaycardBankForm .input_customer{\n       width: auto;\n     }\n      .feexpaycardBankForm .cryptogramme_custom .input_w{\n       width:100% !important;\n   }\n \n      .feexpaycardBankForm .other_info_container{\n         flex-direction:column;\n\n         \n      }\n      .feexpaycardBankForm .expiration_date_custom{\n       width: 100% !important;\n   }\n      .feexpaycardBankForm .date_expiration_input,.feexpaycardBankForm .cryptogramme_input{\n         width:91%;\n      }\n\n      .feexpaycardBankForm .cryptogramme_custom{\n           width:100% !important;\n           align-items: flex-start !important;\n           \n       }\n       .feexpay_modal_container .padding_add{\n         overflow-y: scroll !important;\n           height:fit-content;\n           \n      }\n   \n\n\n }\n\n   \n    \n"]))),j=function(i){var o=i.step,l=i.mode,d=i.redirectUrlCard,s=i.setreseau_card,m=k(),u=m.state,p=m.dispatch,f=a.useState(""),_=f[0],h=f[1];a.useState("");var g=a.useState(""),y=g[0],b=g[1],v=a.useState(""),N=v[0],C=v[1],S=a.useState(""),E=S[0],w=S[1],A=a.useState(""),F=A[0],T=A[1],M=a.useState(""),G=M[0],O=M[1],I=a.useState(""),R=I[0],B=I[1],P=a.useState(""),U=P[0],V=P[1],z=r.div(x||(x=c(["\n    .FormTest {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      gap: 15px;\n      width: 100%;\n      margin-top: 15px;\n    }\n\n  .FormTest__input {\n      width: 100% !important;\n      height: 36px !important;\n      border-radius: 5px !important;\n      font-size: 14px !important;\n      border: 1px solid rgb(187, 187, 187) !important;\n      outline: none !important;\n      text-indent: 5px;\n      margin: 0 !important;\n  }\n\n  .FormTest__btn {\n      padding: 7px 15px;\n      border-radius: 5px;\n      background: #112C56;\n      color: white;\n      font-size: 14px;\n      outline: none;\n  }\n\n  "])));return a.useEffect(function(){0===U.trim().length?O("L'email est requis"):(O(""),p({type:"CHANGE/NAME_CARD",payload:{email_card:U}})),0===N.trim().length||Number.isNaN(parseInt(N))?B("Le numéro de téléphone est requis"):(B(""),p({type:"CHANGE/NAME_CARD",payload:{numero_card:N}})),0===_.trim().length?w("Le nom et le prénom sont requis"):(w(""),p({type:"CHANGE/NAME_CARD",payload:{name_card:_}})),0===y.trim().length?T("Le prénom sont requis"):(T(""),p({type:"CHANGE/NAME_CARD",payload:{last_name_card:y}}))},[U,_,y,N,o]),n(t,{children:[e(H,{}),e("div",{className:"feexpaycardBankForm",children:e("form",{className:"form_pay",children:"SANDBOX"===l?e(z,{children:n("form",{method:"POST",action:"https://checkout.flutterwave.com/v3/hosted/pay",class:"FormTest",children:[n("select",{id:"card-type",name:"card-type",onchange:"window.feexpay_select_card()",class:"FormTest__input",children:[e("option",{value:"",disabled:!0,selected:!0,hidden:!0,children:"Sélectionnez un type de carte"}),e("option",{value:"EUR",children:"VISA"}),e("option",{value:"USD",children:"MASTERCARD"}),e("option",{value:"EUR,USD,XOF",children:"AMEX"}),e("option",{value:"EUR,USD,XOF",children:"GOOGLE PAY"}),e("option",{value:"NGN",children:"NIGERIA BANK"}),e("option",{value:"NGN",children:"NIGERIA BANK TRANSFER"})]}),e("input",{type:"hidden",name:"public_key",value:"FLWPUBK_TEST-937b5f106a970775ab5a9108618e5904-X"}),e("input",{type:"email",class:"CardStep2__input",placeholder:"votre email",name:"customer[email]",required:!0}),e("input",{type:"test",class:"CardStep2__input",placeholder:"votre nom et prénom",name:"customer[name]",required:!0}),e("input",{type:"hidden",name:"tx_ref",value:"txref-81123"}),e("input",{type:"number",class:"CardStep2__input",placeholder:"montant",name:"amount",required:!0}),e("input",{type:"hidden",name:"meta[source]",value:"docs-html-test"}),e("input",{type:"hidden",name:"redirect_url",placeholder:"Url de redirection",class:"CardStep2__input",value:d,required:!0}),e("br",{}),n("button",{type:"submit",class:"FormTest__btn",id:"start-payment-button",children:["Payer ",u.price," XOF"]})]})}):function(){if(0===o)return e(t,{children:n("div",{className:"CardStep2",children:[n("select",{id:"card-type",className:"CardStep2__input",name:"card-type",onChange:function(e){return s(e.target.value)},children:[e("option",{value:"",disabled:!0,selected:!0,hidden:!0,children:"Sélectionnez un type de carte"}),e("option",{value:"VISA",children:"VISA"}),e("option",{value:"MASTERCARD",children:"MASTERCARD"})]}),n("div",{className:"CardStep2_divField",children:[n("label",{className:"CardStep2__field",children:[e("span",{className:"CardStep2__label",children:"Nom"}),e("input",{className:"CardStep2__input",type:"text",placeholder:"Doe",onChange:function(e){h(e.target.value),function(e){0===e.target.value.length&&p({type:"CHANGE/NAME_CARD",payload:{name_card:""}})}(e)}}),e("span",{className:"CardStep2__error",children:E})]}),n("label",{className:"CardStep2__field",children:[e("span",{className:"CardStep2__label",children:"Prénoms"}),e("input",{className:"CardStep2__input",type:"text",placeholder:"John",onChange:function(e){b(e.target.value),function(e){0===e.target.value.length&&p({type:"CHANGE/NAME_CARD",payload:{last_name_card:""}})}(e)}}),e("span",{className:"CardStep2__error",children:F})]})]}),n("label",{className:"CardStep2__field",children:[e("span",{className:"CardStep2__label",children:"Email"}),e("input",{className:"CardStep2__input",type:"email",placeholder:"Email",onChange:function(e){V(e.target.value),function(e){0===e.target.value.length&&p({type:"CHANGE/NAME_CARD",payload:{email_card:""}})}(e)}}),e("span",{className:"CardStep2__error",children:G})]}),n("label",{className:"CardStep2__field",children:[e("span",{className:"CardStep2__label",children:"Numéro de téléphone"}),e("input",{className:"CardStep2__input",type:"number",placeholder:"Numéro",onChange:function(e){C(e.target.value),function(e){0===e.target.value.length&&p({type:"CHANGE/NAME_CARD",payload:{numero_card:""}})}(e)}}),e("span",{className:"CardStep2__error",children:R})]})]})})}()})})]})},q=function(r){var i=r.systemCardPay,l=r.renderComponent,c=r.mode,d=r.redirectUrlCard,s=a.useState(""),m=s[0],u=s[1],p=a.useState(""),f=p[0],_=p[1],h=a.useState(!0),g=h[0],y=h[1],x=a.useState(!1),b=x[0],v=x[1],N=a.useState(""),C=N[0],S=N[1],E=a.useState(!1),w=E[0],A=E[1],F=["Agla","Aibatin","Ahogohoue","Gbedegbe","Missite","Houenoussou","Cadjehoun","Vodje","Fidjrosse","Fiyegnon","Cototier","Ahouanleko","Alobatin","Finagnon","Houeyiho","Saint Jean","Gbegamey","Gbediga","Yenawa","Missogbe","Kouhounou","Midedji","Vedoko","Gbenonkpo","Fifadji","Zogbo","Zogbohohoue","Minonkpo","Mededjro","Tonato","Gbedagba","Houehoun","Sedami","Sedjro","Todote","Yevedo","Dagbegji","Enagnon","Fignon","Sehogan","Ladji","Djidje","Vossa","Dantokpa","Jericho","GBedromede","Ahouansori","Tokpa","Missebo","Gbedokpo","Zongo","Joncquet","Wlacodji","Midombo","Fifatin","Adogleta","Hlakonme","Agbato","DOnatin","Senade","Irede"],T=F[Math.floor(Math.random()*F.length)];a.useRef(null),a.useRef(null);var M=a.useState(0)[0],G=a.useState(!0)[0],I=a.useState(!1),B=I[0],P=I[1],V=k(),z=V.state,L=V.dispatch;function H(){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=n.length,a=0;a<14;a++)e+=n.charAt(Math.floor(Math.random()*t));return e}return a.useEffect(function(){},[z.numero_card,z.reseau_card,m,z.name_card,z.email_card,z.last_name_card,l]),n(t,{children:[e(R,{}),e("div",{className:"ModalInfos",style:{display:B?"flex":"none"},children:n("div",{className:"ModalInfos__center",children:[n("p",{className:"ModalInfos__text",style:{paddingBottom:"15px",borderBottom:"1px solid white"},children:["Pour sélectionner d’autres moyens de paiement ",e("strong",{children:"(cartes et autres)"}),", cliquez sur ",e("strong",{children:"Changer la méthode de paiement"}),"."]}),n("p",{className:"ModalInfos__text",children:["To select other payment methods ",e("strong",{children:"(cards and others)"}),", click on ",e("strong",{children:"Change payment method"}),"."]}),e("button",{className:"ModalInfos__btn",onClick:function(){return P(!1)},children:"Ok"})]})}),g&&n("div",{children:[e("div",{className:"choice_operator_card",children:e("div",{className:"choice_operator_text",children:"Paiement par cartes bancaires"})}),e("div",{className:"feexpay_title_error error_text_operator_input",style:{fontSize:"0.6rem",color:"crimson",marginTop:"0.1rem",marginBottom:"18px"},children:f}),e(j,{step:M,reference:H(),mode:c,redirectUrlCard:d,setreseau_card:u}),"SANDBOX"!==c&&G?w?n(t,{children:[e(U,{}),e("div",{className:"button_container",style:{paddingTop:"2rem"},children:n("div",{className:"button_pay",style:{diplay:"flex",alignItems:"center",justifyContent:"center",width:"fit-content"},children:[e("span",{className:"button_text",children:"En cours"}),e("img",{src:"https://api.feexpay.me/api/static/spinner.svg",width:30,height:30,alt:""})]})})]}):e(D,{pay_func:function(){return function(){if(console.log(m),console.log(z.reseau_card),""===m)_("Choisissez votre operateur"),L({type:"CHANGE/NAME_CARD",payload:{reseau_card:""}});else{if(w)return;A(!0),_(""),L({type:"CHANGE/NAME_CARD",payload:{reseau_card:m}}),function(){try{H();var e=function(){if(""!==m){_("");var e=function(){if(""!==z.numero_card&&""!==z.name_card&&""!==z.email_card&&""!==z.last_name_card){var e=function(e,n){try{var t=(localStorage.setItem("userInfo__",JSON.stringify({name:(null==z?void 0:z.name_card)||"",lastName:(null==z?void 0:z.last_name_card)||"",email:(null==z?void 0:z.email_card)||"",phone:(null==z?void 0:z.numero_card)||"",network:m||"",country:(null==z?void 0:z.country)||"",address1:T})),Promise.resolve(o.post(O+"/transactions/card/inittransact/integration",{amount:""+z.price,reseau:""+m,token:""+z.token,shop:""+z.id,first_name:""+z.name_card,last_name:""+z.last_name_card,address1:""+T,district:"Cotonou",country:"Benin",phone:""+z.numero_card,email:""+z.email_card,callback_info:""+z.callback_info,description:""+z.description,systemCardPay:i,redirectUrlCard:d}).then(function(e){L({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"En attente de paiement",stopchargement:!0}});var n=e.data.reference;if(S(e.data.url),y(!1),v(!0),500!==e.status){frames&&P(!0);var t=0;try{var a=setInterval(function(){try{return Promise.resolve(o.get(O+"/transactions/getrequesttopay/integration/"+n)).then(function(e){var r=e.data.status;console.log(e),"SUCCESSFUL"===r||"FAILED"===r?(t+=1,console.log(r),clearInterval(a),L({type:"CHANGE/REQUESTTOPAYINFO",payload:{transref:n,status:e.data.status}}),L({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Paiement effectué",stopchargement:!0}}),setTimeout(function(){if(z.callback&&"function"==typeof z.callback)z.callback({reference:n,status:"SUCCESSFUL",phoneNumber:z.num_client,full_name:z.full_name,reseau:z.operator_name,callback_info:z.callback_info,description:z.description});else if(void 0!==z.callback_url){var e=new URL(z.callback_url);z.callback_url=e.searchParams&&e.searchParams.toString()?z.callback_url+"&id_transaction="+n:z.callback_url+"?id_transaction="+n,window.location.href=z.callback_url}},3e3)):30==++t&&(clearInterval(a),clearInterval(a))})}catch(e){return Promise.reject(e)}},3e4)}catch(e){console.log("Erreur survenue :\n",e)}}else L({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Une erreur s'est produite. Veuillez recharger la page puis réessayer",stopchargement:!0}})})).then(function(){}))}catch(e){return n()}return t&&t.then?t.then(void 0,n):t}(0,function(){A(!1),alert("Une erreur s'est produite. Veuillez recharger la page puis réessayer..."),L({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Une erreur s'est produite. Veuillez recharger la page puis réessayer",stopchargement:!0}})});if(e&&e.then)return e.then(function(){})}else _("Choisissez votre operateur")}();if(e&&e.then)return e.then(function(){})}}();Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}()}}()}}):""]}),b&&e("iframe",{src:C,height:"600",width:"100%",style:{border:"none"},name:"demo"})]})},Q=function r(i){var l=i.changeVisibleChargementFunc,c=i.changeVisibleChargementExitFunc,d=i.cancel_modal_func,s=i.mode,m=a.useState(!1),u=m[0],p=m[1];a.useState(""),a.useState(""),a.useState("");var f=a.useState("")[1];a.useState(!1),a.useState(!1);var _=a.useState(!1),h=_[0],g=_[1],y=a.useState("")[0],x=k(),b=x.state,v=x.dispatch;a.useState(!1);var N=a.useState(!0)[1],C=a.useState(!1),S=C[0],E=C[1],w=a.useState(!1),F=w[0],T=w[1];a.useState(!1),a.useState(!0),a.useState(!1);var M=a.useState("choice_section")[0],G=a.useState(!1)[1],B=a.useState(!1),U=B[0],z=B[1],D=a.useState(""),H=D[0],j=D[1],Q=a.useState(!1),Y=Q[0],J=Q[1],X=a.useState(!0),W=X[0],K=X[1];return a.useEffect(function(){console.log(b.num_client.length>8&&b.operator_name.length>0&&b.full_name.length>0&&b.email.length>0&&b.country_code>0&&Y),b.num_client.length>4&&b.operator_name.length>0&&b.full_name.length>0&&b.email.length>0&&b.country_code>0&&Y&&function(){try{l();var e=b.token;"SANDBOX"===s&&(e="test_Hg7Kjl3ZAM63UuIUpuudD9nKuu3ZAM67Kjl3Uuhn");var n=b.num_client,t=b.num_client_without_code;"CELTIIS BJ"!==b.operator_name||n.startsWith("0")||(t="2290"+(n="0"+n)),localStorage.setItem("userInfo__",JSON.stringify({name:(null==b?void 0:b.full_name)||"",email:(null==b?void 0:b.email)||"",phone:(null==b?void 0:b.numClient)||"",network:(null==b?void 0:b.operator_name)||""})),Promise.resolve(o.post(O+"/transactions/requesttopay/integration",{phoneNumber:n,phoneNumberRight:t,amount:""+b.price,reseau:""+b.operator_name,token:e,shop:""+b.id,first_name:""+b.full_name,email:""+b.email,reference:""+b.custom_id,otp:""+b.code_otp,callback_info:""+b.callback_info,description:""+b.description}).then(function(e){var n=0,t="MOOV CI"==b.operator_name||"FREE SN"==b.operator_name||"ORANGE CI"==b.operator_name||"WAVE CI"==b.operator_name||"ORANGE BF"==b.operator_name||"MOOV BF"==b.operator_name?e.data.order_id:e.data.reference;if(500!==e.status){if("SANDBOX"!==s){"MOOV CI"!=b.operator_name&&"FREE SN"!=b.operator_name&&"ORANGE CI"!=b.operator_name&&"WAVE CI"!=b.operator_name&&"ORANGE BF"!=b.operator_name&&"MOOV BF"!=b.operator_name||(c(),j(e.data.payment_url),T(!1),K(!1),z(!0));var a=setInterval(function(){try{return Promise.resolve(o.get(O+"/transactions/getrequesttopay/integration/"+t)).then(function(r){var i=r.data.status;"SUCCESSFUL"!==i&&"SUCCESS"!==i&&"Successful"!==i||(n+=1)<2&&(clearInterval(a),v({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Paiement effectué",stopchargement:!0}}),setTimeout(function(){if(b.callback&&"function"==typeof b.callback)b.callback({reference:e.data.reference,status:"SUCCESSFUL",phoneNumber:b.num_client,full_name:b.full_name,reseau:b.operator_name,callback_info:b.callback_info,description:b.description,transaction_id:r.data.transaction_id});else if(void 0!==b.callback_url){var n=new URL(b.callback_url);b.callback_url=n.searchParams&&n.searchParams.toString()?b.callback_url+"&id_transaction="+e.data.reference+"&status=SUCCESSFUL":b.callback_url+"?id_transaction="+e.data.reference+"&status=SUCCESSFUL",window.location.href=b.callback_url}},2e3)),"FAILED"===i&&(clearInterval(a),v({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Veuillez verifier votre numero ou votre solde.",stopchargement:!0}}),setTimeout(function(){if(b.callback&&"function"==typeof b.callback)b.callback({reference:t,status:"FAILED",phoneNumber:b.num_client,full_name:b.full_name,reseau:b.operator_name,callback_info:b.callback_info,description:b.description,transaction_id:r.data.transaction_id});else if(void 0!==b.callback_url){c();var e=new URL(b.callback_url);b.callback_url=e.searchParams&&e.searchParams.toString()?b.callback_url+"&id_transaction="+t+"&status=FAILED":b.callback_url+"?id_transaction="+t+"&status=FAILED",window.location.href=b.callback_url}},5e3))})}catch(e){return Promise.reject(e)}},5e3);setTimeout(function(){try{return Promise.resolve(o.get(O+"/transactions/getrequesttopay/integration/"+t)).then(function(e){var n=e.data.status;"FAILED"!==n&&"INPROGRESS"!==n&&"ACCEPTED"!==n&&"INITIATED"!==n&&"PRE_INITIATED"!==n&&"PENDING"!==n&&"IN PENDING STATE"!==n||(v({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Vous n'avez pas accepter la transaction",stopchargement:!0}}),setTimeout(function(){if(b.callback&&"function"==typeof b.callback)b.callback({reference:t,status:"FAILED",phoneNumber:b.num_client,full_name:b.full_name,reseau:b.operator_name,callback_info:b.callback_info,description:b.description,transaction_id:e.data.transaction_id});else if(void 0!==b.callback_url){c();var n=new URL(b.callback_url);b.callback_url=n.searchParams&&n.searchParams.toString()?b.callback_url+"&id_transaction="+t+"&status=FAILED":b.callback_url+"?id_transaction="+t+"&status=FAILED",window.location.href=b.callback_url}},5e3)),clearInterval(a)})}catch(e){return Promise.reject(e)}},18e4)}else if("SUCCESSFUL"===e.data.status){console.log(e),alert("Paiement effectué..."),c();var r=e.data;console.log("datas== ",r),b.callback()&&"function"==typeof b.callback&&(console.log(r),b.callback(r))}}else v({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Une erreur s'est produite. Veuillez recharger la page puis réessayer",stopchargement:!0}})}).catch(function(e){alert("Une erreur s'est produite. Veuillez recharger la page puis réessayer..."),v("Token API invalid"===e.response.data.message?{type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Veuillez contacter l'administrateur du site.",stopchargement:!0}}:{type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"Une erreur s'est produite. Veuillez recharger la page puis réessayer",stopchargement:!0}})})).then(function(){})}catch(e){return Promise.reject(e)}}()},[b.num_client,b.operator_name,b.full_name,b.email,b.country_code,Y]),n(t,{children:["modal_section"===M&&n(t,{children:[e("div",{className:"pay_with",children:"PAYER AVEC :"}),e(A,{choice_local_func:function(){return E(!1),N(!1),void T(!0)}}),e(I,{choice_cardBank_func:function(){return E(!0),N(!1),void T(!1)}}),e(L,{onClickCancel:function(){return d()}})]}),S&&e(q,{}),F&&e(r,{changeVisibleChargementFunc:function(){G(!0)},changeVisibleChargementExitFunc:function(){return G(!1)}}),"choice_section"===M&&W&&n(t,{children:[e(R,{}),e("div",{className:"error_text_operator",style:{display:h?"block":"none"},children:y}),e(P,{send_pay_form:u,setnum_exist_true:function(){},setnum_exist_false:function(){}}),e(V,{pay_func:function(){return!1===u&&p(!0),!0===u&&p(!1),void(""===b.operator_name?(g(!0),f("Choisissez un operateur mobile")):(g(!1),f(""),J(!0)))}})]}),U&&e("iframe",{src:H,height:"600",width:"100%",style:{border:"none"},name:"demo"})]})},Y=i(b||(b=c(["\n@import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');\n\n      .chargement_container{\n        width:100vw;\n        height:100vh;\n        position:fixed;\n        top:0px;\n        left:0px;\n        background-color:#404040a6;\n        z-index:1000000000;\n        \n        flex-direction:column;\n        align-items:center;\n        justify-coNtent:center;\n        \n      }\n      .message_container{\n       \n        padding:2rem;\n        display:flex;\n        flex-direction:column;\n        align-items:center;\n        width:25%;\n        height:25%;\n        justify-coNtent:center;\n        background-color:#D45D00;\n        box-shadow:2px 2px 10px 2px #5a5a5a1f;\n        transform:translateY(10px);\n      }\n      img{\n        width:10px;\n      }\n\n      .request_msg{\n        font-size:0.9rem;\n        color:white;\n        font-weight:500;\n        margin-top:1rem;\n        font-family: 'Poppins', sans-serif;\n        text-align:center;\n\n      }\n\n      .loader{\n        width:50px;\n        height:50px;\n        border:10px solid white;\n        border-top:10px solid #112C56;\n        margin:0 auto;\n        border-radius:50%;\n        animation: spin 2s linear infinite;\n\n      }\n      @keyframes spin {\n        0%{transform: rorate(0deg)}\n        100%{transform:rotate(360deg)}\n      }\n\n\n      \n    @media screen and (max-width:700px) {\n      .message_container{\n        width:60%;\n        height:30%;\n      }\n    }\n\n\n      \n"]))),J=function(r){var i=r.isVisible,o=k(),l=o.state,c=o.dispatch,d=a.useState(!1),s=d[0],m=d[1];return a.useEffect(function(){!0===i&&(m(!0),c({type:"CHANGE/REQUESTMESSAGE",payload:{paiement_request_verify_msg:"En attente du paiement.",stopchargement:!1}})),!1===i&&m(!1)},[i]),n(t,{children:[e(Y,{}),e("div",{className:"chargement_container",style:{display:s?"flex":"none"},children:n("div",{className:"message_container",style:{backgroundColor:"Paiement effectué"===l.paiement_request_verify_msg?"green":"#D45D00"},children:[e("div",{className:"loader",style:{display:l.stopchargement?"none":"block"}}),e("div",{className:"request_msg",children:l.paiement_request_verify_msg})]})})]})},X=function(r){var i=r.isOpen,o=r.cancel_modal,l=r.cancel_modal_func,c=r.name_marchand,d=r.reference_marchand,s=r.systemCardPay,m=r.mode,u=r.redirectUrlCard,p=a.useState(!0),f=p[0],_=p[1],h=a.useState(!1),g=h[0],y=h[1],x=a.useState(!1),b=x[0],v=x[1],N=a.useState(!1),C=N[0],S=N[1];return k(),n(t,{children:[e(E,{}),e(J,{isVisible:C}),e("div",{className:"modal_container",style:{position:"fixed !important",zIndex:"10000000000 !important",transition:"all 2s",transform:i&&!1===o?"scale(1)":"scale(0.6)",display:i&&!1===o?"flex":"none"},children:n("div",{className:"modal",children:[n("div",{className:"modal_header",children:[e("div",{className:"logo_container",children:e("img",{className:"logo",src:"https://api.feexpay.me/api/static/feexpay_logo-h.png",alt:"feexpay"})}),n("div",{className:"header_text",children:[e("div",{className:"feexpay_close_btn",onClick:function(){return l()}}),n("div",{className:"marchant_name",children:["MARCHAND : ",c]})," ",n("div",{className:"id_info",children:[" ID : ",d]})]})]}),n("div",{className:"padding_add",style:{paddingLeft:"2rem",paddingRight:"2rem",height:"94%",overflowY:"scroll"},children:["SANDBOX"===m?e("div",{className:"ModeTestMsg",children:n("p",{children:["Vous êtes en mode ",e("strong",{children:"Test"})]})}):"",f&&n(t,{children:[e("div",{className:"pay_with",children:"PAYER AVEC :"}),e(A,{choice_local_func:function(){return y(!1),_(!1),void v(!0)}}),s||""!==s?e(I,{choice_cardBank_func:function(){return y(!0),_(!1),void v(!1)}}):null,e(L,{onClickCancel:function(){return l()}})]}),g&&e(q,{systemCardPay:s,mode:m,redirectUrlCard:u}),b&&e(Q,{changeVisibleChargementFunc:function(){S(!0)},changeVisibleChargementExitFunc:function(){return S(!1)},mode:m})]}),n("div",{className:"secure_by_feexpay",children:[e("div",{className:"lock_line"}),e("div",{className:"img_lock_container",children:e("img",{className:"img_lock",src:"https://api.feexpay.me/api/static/svg/icons8-lock.svg",alt:"icon lock"})}),e("div",{className:"lock_text",children:"Sécurisé par FeexPay"})]}),e("div",{className:"secure_by_feexpay",style:{flexDirection:"column"},children:n("div",{className:"lock_text",children:["En payant via ce plugin, vous acceptez les ",e("a",{href:"https://feexpay.me/termesconditions",target:"_blank",style:{color:"#D45D00",textDecoration:"none"},children:"conditions générales d'utilisation"})," de FeexPay."]})}),e("div",{className:"footer_modal_container",children:e("div",{className:"footer_modal"})})]})})]})},W=function(r){var i=r.amount,l=r.token,c=r.id,d=r.callback,s=r.callback_url,m=r.description,u=r.callback_info,p=r.reference,f=r.fieldsToHide,_=r.buttonText,h=r.buttonStyles,g=r.buttonClass,y=r.defaultValueField,x=r.mode,b=void 0===x?"LIVE":x,v=r.redirectUrlCard,C=void 0===v?"https://app.feexpay.me/checkout-status":v,k=a.useState(!1),E=k[0],w=k[1],A=a.useState(!0),F=A[0],T=A[1],M=a.useState(!1),G=M[0],I=M[1],R=a.useState(""),B=R[0],P=R[1],U=a.useState(""),V=U[0],z=U[1],L=a.useState(""),D=L[0],H=L[1],j=i;return a.useEffect(function(){!function(){try{Promise.resolve(o.get(O+"/shop/"+c+"/get_shop").then(function(e){var n=null==e?void 0:e.data;n&&(P(n.name),z(n.reference),I(!0),H(n.systemCardPay||"Bizao"))}).catch(function(e){"Le format de l'id est"===e.response.data.message&&(P(""),z(""),I(!1))})).then(function(){})}catch(e){return Promise.reject(e)}}()},[]),e(t,{children:n(N,{amount:j,token:l,id:c,callback:d,callback_url:s,description:m,callback_info:u,reference:p,fieldsToHide:f,buttonText:_,buttonStyles:h,buttonClass:g,defaultValueField:y,children:[e(X,{token:l,systemCardPay:D,isOpen:E,cancel_modal:F,cancel_modal_func:function(){return w(!1),void T(!0)},name_marchand:B,reference_marchand:V,mode:b,redirectUrlCard:C}),e(S,{open_modal:function(){return w(!0),void T(!1)},feexVisisbleBtn:G,buttonText:_,buttonStyles:h,buttonClass:g})]})})};export{W as default};
